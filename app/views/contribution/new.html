<div ng-controller="NewCtrl">
  <div class="loading-full" ng-show="loading">
    <i class="fa fa-4x fa-spinner fa-spin fa-inverse"></i>
  </div>
  <p class="text-center text-danger center-block" ng-show="hasError && !contribution.type">A contribution type is requred</p>
  <ul class="contribution-type">
    <li class="center-block" ng-class="{active: contribution.type == 'opinion'}" ng-click="contribution.type = 'opinion'">
      <a class="text-center" href="#">
        <span class="li_megaphone"></span><br>
        <small>Opinion</small>
      </a>
    </li>
    <li class="center-block" ng-class="{active: contribution.type == 'poll'}" ng-click="contribution.type = 'poll'">
      <a class="text-center" href="#">
        <span class="li_bubble"></span><br>
        <small>Poll</small>
      </a>
    </li>
    <li class="center-block" ng-class="{active: contribution.type == 'issue'}" ng-click="contribution.type = 'issue'">
      <a class="text-center" href="#">
        <span class="li_fire"></span><br>
        <small>Issue</small>
      </a>
    </li>
    <li class="center-block" ng-class="{active: contribution.type == 'idea'}" ng-click="contribution.type = 'idea'">
      <a class="text-center" href="#">
        <span class="li_bulb"></span><br>
        <small>Idea</small>
      </a>
    </li>
  </ul>
  <div class="contribution-photo text-center">
    <div ng-class="{background: imageSrc}" ng-style="bgImageStyle"></div>
    <div class="content">
      <button ng-if="!imageSrc" class="btn btn-primary btn-circle" ng-click="choosePhoto('Which photo should be added?')"><i class="fa fa-3x fa-camera"></i></button>
      <div ng-if="imageSrc" ng-click="choosePhoto('Do you want to replace your photo?')" ng-style="bgImageStyle" class="contribution-photo-preview center-block"></div>
    </div>
    <button ng-if="imageSrc" ng-click="removePhoto()" type="button" class="close btn-remove-photo" aria-hidden="true">&times;</button>
  </div>    
  <div class="well well-sm">
    <div class="contribution-title" ng-class="{'has-error': hasError && !contribution.title}">
      <span class="text-center help-block has-error" ng-show="hasError && !contribution.title">A title is required</span>
      <input type="text" name ="title" class="form-control text-center input-lg" ng-model="contribution.title" placeholder="Tap to enter a title" required />
    </div>
    <div ng-if="contribution.type != 'poll'" ng-class="{'has-error': hasError && !contribution.description}">
      <span class="text-center help-block has-error" ng-show="hasError && !contribution.description">A descrption is required</span>
      <textarea class="form-control" name="description" ng-model="contribution.description" rows="3" placeholder="Tap to enter a description" required></textarea>
    </div>
    <div ng-if="contribution.type == 'poll'">
      <p class="text-center text-danger center-block" ng-show="hasError && contribution.pollOptions.length < 2">At least two poll options are required</p>
      <button class="btn btn-primary btn-block" ng-click="addPollOptionPrompt()"><i class="fa fa-plus-circle"></i>&nbsp;Add poll option</button>
      <ul class="list-group" ng-show="contribution.pollOptions.length > 0">
        <li class="list-group-item" ng-repeat="pollOption in contribution.pollOptions"><button type="button" class="close" aria-hidden="true" ng-click="removePollOption(pollOption)"><i class="fa fa-minus-circle"></i></button>{{ pollOption }}</li>
      </ul>
    </div>
  </div>
  <div class="contribution-meta">
    <ul class="list-group">
      <li class="list-group-item"  ng-click="choosePoi()">
        <button type="button" class="close" aria-hidden="true"><i class="fa fa-angle-right"></i></button>
        <i class="fa fa-map-marker"></i>&nbsp;
        <span ng-if="!contribution.poi">I'm at …</span>
        <span ng-if="contribution.poi">I'm at <strong>{{ contribution.poi }}</strong></span>
      </li>
      <li class="list-group-item" ng-click="chooseMood()">
        <button type="button" class="close" aria-hidden="true"><i class="fa fa-angle-right"></i></button>
        <i class="fa fa-smile-o"></i>&nbsp;
        <span ng-if="!contribution.mood">I'm feeling …</span>
        <span ng-if="contribution.mood">I'm feeling <strong>{{ contribution.mood.name }}&nbsp;</span></strong>&nbsp;<span ng-if="contribution.mood" class="mood-icon icomatic">{{ contribution.mood.code }}filled</span>
      </li>
    </ul>
  </div>
  <div class="container">
    <p><button class="btn btn-default btn-block" ng-click="reset()">Reset contribution</button></p>
  </div>
</div>