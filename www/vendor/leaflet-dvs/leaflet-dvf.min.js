/*
 @preserve Leaflet Data Visualization Framework, a JavaScript library for creating thematic maps using Leaflet
 (c) 2013, Scott Fairgrieve, HumanGeo
*/
L.LinearFunction=L.Class.extend({initialize:function(t,e,i){this.setOptions(i);this.setRange(t,e)},_calculateParameters:function(t,e){if(this._xRange===0){this._slope=0;this._b=t.y}else{this._slope=(e.y-t.y)/this._xRange;this._b=t.y-this._slope*t.x}},_arrayToPoint:function(t){return{x:t[0],y:t[1]}},setOptions:function(t){L.Util.setOptions(this,t);this._preProcess=this.options.preProcess;this._postProcess=this.options.postProcess},getBounds:function(){var t=Math.min(this._minPoint.x,this._maxPoint.x);var e=Math.max(this._minPoint.x,this._maxPoint.x);var i=Math.min(this._minPoint.y,this._maxPoint.y);var a=Math.max(this._minPoint.y,this._maxPoint.y);return[new L.Point(t,i),new L.Point(e,a)]},setRange:function(t,e){t=t instanceof Array?this._arrayToPoint(t):t;e=e instanceof Array?this._arrayToPoint(e):e;this._minPoint=t;this._maxPoint=e;this._xRange=e.x-t.x;this._calculateParameters(t,e);return this},setMin:function(t){this.setRange(t,this._maxPoint);return this},setMax:function(t){this.setRange(this._minPoint,t);return this},setPreProcess:function(t){this._preProcess=t;return this},setPostProcess:function(t){this._postProcess=t;return this},evaluate:function(t){var e;if(this._preProcess){t=this._preProcess(t)}e=Number((this._slope*t).toFixed(6))+Number(this._b.toFixed(6));if(this._postProcess){e=this._postProcess(e)}return e},random:function(){var t=Math.random()*this._xRange+this._minPoint.x;return this.evaluate(t)},sample:function(t){t=Math.max(t,2);var e=t-1;var i=this._xRange/e;var a=this._minPoint.x;var n=[];while(a<=this._maxPoint.x){n.push(this.evaluate(a));a+=i}return n},samplePoints:function(t){t=Math.max(t,2);var e=t-1;var i=this._xRange/e;var a=this._minPoint.x;var n=[];while(a<=this._maxPoint.x){n.push(new L.Point(a,this.evaluate(a)));a+=i}return n},getIntersectionPoint:function(t){var e=null;if(this._slope!==t._slope){var i=(this._b-t._b)/(t._slope-this._slope);var a=this.evaluate(i);e=new L.Point(i,a)}return e}});L.ColorFunction=L.LinearFunction.extend({options:{alpha:1,includeAlpha:false},initialize:function(t,e,i){L.Util.setOptions(this,i);this._parts=[];this._dynamicPart=null;this._outputPrecision=0;this._prefix=null;this._formatOutput=function(t){return t.toFixed(this._outputPrecision)},this._mapOutput=function(t){var e=[];for(var i=0;i<this._parts.length;++i){var a=this._parts[i];e.push(t[a])}if(this.options.includeAlpha){e.push(this.options.alpha)}return e};this._getColorString=function(t){t=this._formatOutput(t);this.options[this._dynamicPart]=t;var e=this._mapOutput(this.options);return this._writeColor(this._prefix,e)};this._writeColor=function(t,e){if(this.options.includeAlpha){t+="a"}return t+"("+e.join(",")+")"};var a=function(t){if(i&&i.postProcess){t=i.postProcess.call(this,t)}var e=this._getColorString(t);if(L.Browser.ie&&e.indexOf("hsl")>-1){e=L.ColorUtils.hslStringToRgbString(e)}return e};L.LinearFunction.prototype.initialize.call(this,t,e,{preProcess:this.options.preProcess,postProcess:a})}});L.HSLColorFunction=L.ColorFunction.extend({initialize:function(t,e,i){L.ColorFunction.prototype.initialize.call(this,t,e,i);this._parts=["outputHue","outputSaturation","outputLuminosity"];this._prefix="hsl";this._outputPrecision=2}});L.RGBColorFunction=L.ColorFunction.extend({initialize:function(t,e,i){L.ColorFunction.prototype.initialize.call(this,t,e,i);this._parts=["outputRed","outputBlue","outputGreen"];this._prefix="rgb";this._outputPrecision=0}});L.RGBRedFunction=L.LinearFunction.extend({options:{outputGreen:0,outputBlue:0},initialize:function(t,e,i){L.RGBColorFunction.prototype.initialize.call(this,t,e,i);this._dynamicPart="outputRed"}});L.RGBBlueFunction=L.LinearFunction.extend({options:{outputRed:0,outputGreen:0},initialize:function(t,e,i){L.RGBColorFunction.prototype.initialize.call(this,t,e,i);this._dynamicPart="outputBlue"}});L.RGBGreenFunction=L.LinearFunction.extend({options:{outputRed:0,outputBlue:0},initialize:function(t,e,i){L.RGBColorFunction.prototype.initialize.call(this,t,e,i);this._dynamicPart="outputGreen"}});L.RGBColorBlendFunction=L.LinearFunction.extend({initialize:function(t,e,i,a){i=new L.RGBColor(i);a=new L.RGBColor(a);var n=i.r();var o=a.r();var r=i.g();var s=a.g();var l=i.b();var f=a.b();this._minX=t;this._maxX=e;this._redFunction=new L.LinearFunction(new L.Point(t,n),new L.Point(e,o));this._greenFunction=new L.LinearFunction(new L.Point(t,r),new L.Point(e,s));this._blueFunction=new L.LinearFunction(new L.Point(t,l),new L.Point(e,f))},getBounds:function(){var t=this._redFunction.getBounds();var e=this._greenFunction.getBounds();var i=this._blueFunction.getBounds();var a=Math.min(t[0].y,e[0].y,i[0].y);var n=Math.max(t[0].y,e[0].y,i[0].y);return[new L.Point(t[0].x,a),new L.Point(t[1].x,n)]},evaluate:function(t){return new L.RGBColor([this._redFunction.evaluate(t),this._greenFunction.evaluate(t),this._blueFunction.evaluate(t)]).toRGBString()}});L.HSLHueFunction=L.HSLColorFunction.extend({options:{outputSaturation:"100%",outputLuminosity:"50%"},initialize:function(t,e,i){L.HSLColorFunction.prototype.initialize.call(this,t,e,i);this._dynamicPart="outputHue"}});L.HSLSaturationFunction=L.LinearFunction.extend({options:{outputHue:0,outputLuminosity:"50%"},initialize:function(t,e,i){L.HSLColorFunction.prototype.initialize.call(this,t,e,i);this._formatOutput=function(t){return(t*100).toFixed(this._outputPrecision)+"%"};this._dynamicPart="outputSaturation"}});L.HSLLuminosityFunction=L.LinearFunction.extend({options:{outputHue:0,outputSaturation:"100%"},initialize:function(t,e,i){L.HSLColorFunction.prototype.initialize.call(this,t,e,i);this._formatOutput=function(t){return(t*100).toFixed(this._outputPrecision)+"%"};this._dynamicPart="outputLuminosity"}});L.HSLColorBlendFunction=L.LinearFunction.extend({initialize:function(t,e,i,a){i=new L.HSLColor(i);a=new L.HSLColor(a);var n=i.h();var o=a.h();var r=i.s();var s=a.s();var l=i.l();var f=a.l();var c=function(t){return t.toFixed(2)};this._minX=t;this._maxX=e;this._hueFunction=new L.LinearFunction(new L.Point(t,n),new L.Point(e,o));this._saturationFunction=new L.LinearFunction(new L.Point(t,r),new L.Point(e,s));this._luminosityFunction=new L.LinearFunction(new L.Point(t,l),new L.Point(e,f))},getBounds:function(){var t=this._hueFunction.getBounds();var e=this._saturationFunction.getBounds();var i=this._luminosityFunction.getBounds();var a=Math.min(t[0].y,e[0].y,i[0].y);var n=Math.max(t[0].y,e[0].y,i[0].y);return[new L.Point(t[0].x,a),new L.Point(t[1].x,n)]},evaluate:function(t){return new L.HSLColor([this._hueFunction.evaluate(t),this._saturationFunction.evaluate(t),this._luminosityFunction.evaluate(t)]).toHSLString()}});L.PiecewiseFunction=L.LinearFunction.extend({initialize:function(t,e){L.Util.setOptions(this,e);this._functions=t;var i;var a;i=t[0].getBounds()[0];a=t[t.length-1].getBounds()[1];L.LinearFunction.prototype.initialize.call(this,i,a,{preProcess:this.options.preProcess,postProcess:this.options.postProcess})},_getFunction:function(t){var e;var i;var a;var n=false;var o;for(var r=0;r<this._functions.length;++r){o=this._functions[r];e=o.getBounds();i=e[0];a=e[1];if(t>=i.x&&t<a.x){n=true;break}}return n?o:this._functions[this._functions.length-1]},evaluate:function(t){var e;var i=null;if(this._preProcess){t=this._preProcess(t)}e=this._getFunction(t);if(e){i=e.evaluate(t);if(this._postProcess){i=this._postProcess(i)}}return i}});L.CustomColorFunction=L.PiecewiseFunction.extend({options:{interpolate:true},initialize:function(t,e,i,a){var n=e-t;var o=n/(i.length-1);var r=[];var s;L.Util.setOptions(this,a);for(var l=0;l<i.length;++l){var f=Math.min(l+1,i.length-1);s=this.options.interpolate?new L.RGBColorBlendFunction(t+o*l,t+o*f,i[l],i[f]):new L.RGBColorBlendFunction(t+o*l,t+o*f,i[l],i[l]);r.push(s)}L.PiecewiseFunction.prototype.initialize.call(this,r)}});L.CategoryFunction=L.Class.extend({initialize:function(t,e){L.Util.setOptions(this,e);this._categoryKeys=Object.keys(t);this._categoryMap=t;this._preProcess=this.options.preProcess;this._postProcess=this.options.postProcess},evaluate:function(t){var e;if(this._preProcess){t=this._preProcess(t)}e=this._categoryMap[t];if(this._postProcess){e=this._postProcess(e)}return e},getCategories:function(){return this._categoryKeys}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(t,e){for(var i=e||0,a=this.length;i<a;i++){if(this[i]===t){return i}}return-1}}if(!Object.keys){Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=i.length;return function(n){var o,r,s;if(typeof n!=="object"&&typeof n!=="function"||n===null){throw new TypeError("Object.keys called on non-object")}o=[];for(r in n){if(t.call(n,r)){o.push(r)}}if(e){for(s=0;s<a;s++){if(t.call(n,i[s])){o.push(i[s])}}}return o}}()}L.Util.guid=function(){var t=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};L.Util.getProperty=function(t,e,i){return e in t?t[e]:i};L.Util.setFieldValue=function(t,e,i){var a=e.split(".");var n=t;var o;for(var r=0;r<a.length-1;++r){o=a[r];n[o]=n[o]||{};n=n[o]}n[a[a.length-1]]=i};L.Util.getFieldValue=function(t,e){var i=null;if(e){var a=e.split(".");var n=t;var o;var r;var s;var l;var f;var c;var d=-1;var u;for(var h=0;h<a.length;++h){o=a[h];d=o.indexOf("[");if(d>-1){c=o.substring(d);o=o.substring(0,d);c=c.replace("[","").replace("]","");r=c.split("=");s=r[0];l=r[1];n=n[o];for(var p=0;p<n.length;++p){f=n[p];u=f[s];if(u&&u===l){n=f}}}else if(n&&n.hasOwnProperty(o)){n=n[o]}else{n=null;break}}i=n}else{i=t}return i};L.Util.getNumericRange=function(t,e){var i=Number.MAX_VALUE;var a=Number.MIN_VALUE;for(var n in t){if(t.hasOwnProperty(n)){var o=t[n];var r=L.Util.getFieldValue(o,e);i=Math.min(i,r);a=Math.max(a,r)}}return[i,a]};L.CategoryLegend=L.Class.extend({initialize:function(t){L.Util.setOptions(this,t)},generate:function(t){t=t||{};var e=document.createElement("div");var i=L.DomUtil.create("div","legend",e);var a=t.className;var n=this.options;if(a){L.DomUtil.addClass(i,a)}if(t.title){L.DomUtil.create("div","legend-title",i).innerHTML=t.title}for(var o in n){categoryOptions=n[o];var r=categoryOptions.displayName||o;var s=L.DomUtil.create("div","data-layer-legend",i);var l=L.DomUtil.create("div","legend-box",s);L.DomUtil.create("div","key",s).innerHTML=r;L.StyleConverter.applySVGStyle(l,categoryOptions)}return e.innerHTML}});L.LegendIcon=L.DivIcon.extend({initialize:function(t,e,i){var a=document.createElement("div");var n=L.DomUtil.create("div","legend",a);var o=L.DomUtil.create("div","title",n);var r=L.DomUtil.create("div","legend-box",n);var s=L.DomUtil.create("div","legend-values",n);var l;var f=e.title||e.name;if(f){o.innerHTML=f}for(var c in t){l=t[c];L.DomUtil.create("div","key",s).innerHTML=l.name||c;L.DomUtil.create("div","value",s).innerHTML=l.value}L.StyleConverter.applySVGStyle(r,e);r.style.height="5px";i.html=a.innerHTML;i.className=i.className||"legend-icon";L.DivIcon.prototype.initialize.call(this,i)}});L.legendIcon=function(t,e,i){return new L.LegendIcon(t,e,i)};L.GeometryUtils={getName:function(t){var e=null;if(t&&t.features){for(var i=0;i<t.features.length;++i){var a=t.features[i];if(a.properties&&a.properties.name){e=a.properties.name;break}}}return e},getGeoJSONLocation:function(t,e,i,a){var n=new L.GeoJSON(t,{pointToLayer:function(t,n){var o={location:n,text:i?L.Util.getFieldValue(e,i):[n.lat.toFixed(3),n.lng.toFixed(3)].join(", "),center:n};return a(o,e)}});var o=null;try{o=L.GeometryUtils.loadCentroid(t)}catch(r){console.log("Error loading centroid for "+JSON.stringify(t))}return{location:n,text:i?L.Util.getFieldValue(e,i):null,center:o}},mergeProperties:function(t,e,i){var a=e["features"];var n=L.GeometryUtils.indexFeatureCollection(a,i);var o;var r;var s={type:"FeatureCollection",features:[]};for(var l in t){if(t.hasOwnProperty(l)){o=t[l];r=o[i];if(r){var f=n[r];for(var c in o){f.properties[c]=o[c]}s.features.push(f)}}}return s},indexFeatureCollection:function(t,e){var i=t.features;var a;var n;var o={};var r;for(var s=0;s<i.length;++s){a=i[s];n=a.properties;r=n[e];if(r in o){var l=o[r];if(l.geometry.type!=="GeometryCollection"){o[r]={type:"Feature",geometry:{type:"GeometryCollection",geometries:[a.geometry,l.geometry]}}}else{l.geometry.geometries.push(a.geometry)}}else{o[r]=a}}return o},arrayToMap:function(t,e,i){var a={};var n;var o;var r;for(var s=0;s<t.length;++s){n=t[s];o=n[e];r=i?n[i]:n;a[o]=r}return a},arrayToMaps:function(t,e){var i;var a;var n;var o;var r=[];var s;var l;var f;for(var c=0;c<e.length;++c){r.push({})}for(var d=0;d<t.length;++d){a=t[d];for(var u=0;u<e.length;++u){i=r[u];s=e[u];l=s.from;f=s.to;n=a[l];o=f?a[f]:a;i[n]=o}}return r},loadCentroid:function(t){var e=null;var i;var a,n;if(t.geometry&&t.geometry.type==="Point"){e=new L.LatLng(t.geometry.coordinates[1],t.geometry.coordinates[0])}else if(typeof jsts!=="undefined"){var o=new jsts.io.GeoJSONParser;var r=o.read(t);if(r.getCentroid){i=r.getCentroid();a=i.coordinate.x;n=i.coordinate.y}else if(r.features){var s=0;var l=0;for(var f=0;f<r.features.length;++f){i=r.features[f].geometry.getCentroid();s+=i.coordinate.x;l+=i.coordinate.y}a=s/r.features.length;n=l/r.features.length}else{i=r.geometry.getCentroid();a=i.coordinate.x;n=i.coordinate.y}e=new L.LatLng(n,a)}return e},loadCentroids:function(t){var e={};var i;for(var a in t){i=t[a];e[a]=L.GeometryUtils.loadCentroid(i)}return e}};L.SVGPathBuilder=L.Class.extend({initialize:function(t,e,i){this._points=t||[];this._innerPoints=e||[];L.Util.setOptions(this,i)},options:{closePath:true},_getPathString:function(t,e){var i="";if(t.length>0){var a=t[0];var e=e!==null?e:2;var n="M";var o="L";var r="Z";if(L.Browser.vml){e=0;n="m";o="l";r="xe"}i=n+a.x.toFixed(e)+","+a.y.toFixed(e);for(var s=1;s<t.length;s++){a=t[s];i+=o+a.x.toFixed(e)+","+a.y.toFixed(e)}if(this.options.closePath){i+=r}}return i},addPoint:function(t,e){e?this._innerPoints.push(t):this._points.push(t)},build:function(t){t=t||this.options.digits;var e=this._getPathString(this._points,t);if(this._innerPoints){e+=this._getPathString(this._innerPoints,t)}return e}});L.StyleConverter={keyMap:{fillColor:{property:["background-color"],valueFunction:function(t){return t}},color:{property:["color","border-top-color","border-right-color","border-bottom-color","border-left-color"],valueFunction:function(t){return t}},weight:{property:["border-width"],valueFunction:function(t){return Math.ceil(t)+"px"}},stroke:{property:["border-style"],valueFunction:function(t){return t===true?"solid":"none"}},dashArray:{property:["border-style"],valueFunction:function(t){var e="solid";if(t){e="dashed"}return e}},barThickness:{property:["height"],valueFunction:function(t){return t+"px"}},radius:{property:["height"],valueFunction:function(t){return 2*t+"px"}},fillOpacity:{property:["opacity"],valueFunction:function(t){return t}}},applySVGStyle:function(t,e,i){var a=L.StyleConverter.keyMap;if(i){a=L.Util.extend(a,i)}t.style.borderStyle="solid";for(var n in e){L.StyleConverter.setCSSProperty(t,n,e[n],a)}return t},setCSSProperty:function(t,e,i,a){var a=a||L.StyleConverter.keyMap;var n=a[e];var o="";if(n){var r=n.property;for(var s=0,l=r.length;s<l;++s){o+=r[s]+":"+n.valueFunction(i)+";"}}t.style.cssText+=o;return t}};L.StylesBuilder=L.Class.extend({initialize:function(t,e){this._categories=t;this._styleFunctionMap=e;this._buildStyles()},_buildStyles:function(){var t={};var e;var i;var a;for(var n=0;n<this._categories.length;++n){e=this._categories[n];t[e]={};for(var o in this._styleFunctionMap){i=this._styleFunctionMap[o];a=i.evaluate?i.evaluate(n):typeof i==="function"?i(n):i;t[e][o]=a}}this._styleMap=t},getStyles:function(){return this._styleMap}});L.PaletteBuilder=L.Class.extend({initialize:function(t){this._styleFunctionMap=t},generate:function(t){t=t||{};var e=document.createElement("div");var i=L.DomUtil.create("div","palette",e);var a=t.count||10;var n=function(t){var e=[];for(var i=0;i<t;++i){e.push(i)}return e}(a);var o=new L.StylesBuilder(n,this._styleFunctionMap);var r=o.getStyles();if(t.className){L.DomUtil.addClass(i,t.className)}for(var s in r){var l=L.DomUtil.create("i","palette-element",i);var f=r[s];L.StyleConverter.applySVGStyle(l,f)}return e.innerHTML}});L.HTMLUtils={buildTable:function(t,e,i){e=e||"table table-condensed table-striped table-bordered";var a=L.DomUtil.create("table",e);var n=L.DomUtil.create("thead","",a);var o=L.DomUtil.create("tbody","",a);n.innerHTML="<tr><th>Name</th><th>Value</th></tr>";i=i||[];function r(t,e){for(var i=0,a=t.length;i<a;i++){if(t[i]===e){return true}}return false}for(var s in t){if(t.hasOwnProperty(s)&&!r(i,s)){var l=t[s];if(typeof l==="object"){var f=document.createElement("div");f.appendChild(L.HTMLUtils.buildTable(l,i));l=f.innerHTML}o.innerHTML+="<tr><td>"+s+"</td><td>"+l+"</td></tr>"}}return a}};L.AnimationUtils={animate:function(t,e,i,a){var n=a.delay||0;var o=a.frames||30;var r=a.duration||500;var s={};var l=a.easeFunction||function(t){return t};var f=a.complete;var c=r/o;for(var d in e){if(d!="color"&&d!="fillColor"&&i[d]){s[d]=new L.LinearFunction([0,e[d]],[o-1,i[d]])}}var u={};var h=0;var p=function(){for(var e in s){u[e]=s[e].evaluate(h)}t.options=L.extend({},t.options,u);t.redraw();h++;c=l(c);if(h<o){setTimeout(p,c)}else{f()}};setTimeout(p,n)}};L.Color=L.Class.extend({initialize:function(t){this._rgb=[0,0,0];this._hsl=[0,1,.5];this._a=1;if(t){this.parseColorDef(t)}},parseColorDef:function(t){},rgbToHSL:function(t,e,i){t/=255,e/=255,i/=255;var a=Math.max(t,e,i),n=Math.min(t,e,i);var o,r,s=(a+n)/2;if(a==n){o=r=0}else{var l=a-n;r=s>.5?l/(2-a-n):l/(a+n);switch(a){case t:o=(e-i)/l+(e<i?6:0);break;case e:o=(i-t)/l+2;break;case i:o=(t-e)/l+4;break}o/=6}return[o,r,s]},hslToRGB:function(t,e,i){var a,n,o;if(e==0){a=n=o=i}else{function r(t,e,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return t+(e-t)*6*i;if(i<1/2)return e;if(i<2/3)return t+(e-t)*(2/3-i)*6;return t}var s=i<.5?i*(1+e):i+e-i*e;var l=2*i-s;a=r(l,s,t+1/3);n=r(l,s,t);o=r(l,s,t-1/3)}return[Math.floor(a*255),Math.floor(n*255),Math.floor(o*255)]},setRGB:function(t,e,i){this._rgb=[t,e,i];this._hsl=this.rgbToHSL(t,e,i);return this},setHSL:function(t,e,i){this._hsl=[t,e,i];this._rgb=this.hslToRGB(t,e,i);return this},toHSL:function(){return this._hsl},toHSLString:function(){var t="hsl";if(this._a<1){t+="a"}return t+"("+(this._hsl[0]*360).toFixed(1)+","+(this._hsl[1]*100).toFixed(0)+"%,"+(this._hsl[2]*100).toFixed(0)+"%)"},toRGB:function(){return this._rgb},toRGBString:function(){var t;if(this._a<1){t="rgba("+this._rgb[0].toFixed(0)+","+this._rgb[1].toFixed(0)+","+this._rgb[2].toFixed(0)+","+this._a.toFixed(1)+")"}else{var e=[this._rgb[0].toString(16),this._rgb[1].toString(16),this._rgb[2].toString(16)];for(var i=0;i<e.length;++i){if(e[i].length===1){e[i]="0"+e[i]}}t="#"+e.join("")}return t},r:function(t){if(!arguments.length)return this._rgb[0];this.setRGB(t,this._rgb[1],this._rgb[2])},g:function(t){if(!arguments.length)return this._rgb[1];this.setRGB(this._rgb[0],t,this._rgb[2])},b:function(t){if(!arguments.length)return this._rgb[2];this.setRGB(this._rgb[0],this._rgb[1],t)},h:function(t){if(!arguments.length)return this._hsl[0];this.setHSL(t,this._hsl[1],this._hsl[2])},s:function(t){if(!arguments.length)return this._hsl[1];this.setHSL(this._hsl[0],t,this._hsl[2])},l:function(t){if(!arguments.length)return this._hsl[2];this.setHSL(this._hsl[0],this._hsl[1],t)},a:function(t){if(!arguments.length)return this._a;this._a=t}});L.RGBColor=L.Color.extend({initialize:function(t){L.Color.prototype.initialize.call(this,t)},parseColorDef:function(t){var e=t instanceof Array;var i=t.indexOf("#")===0;var a=[];var n=[];var o,r,s,l;if(e){o=Math.floor(t[0]);r=Math.floor(t[1]);s=Math.floor(t[2]);l=t.length===4?t[3]:1}else if(i){t=t.replace("#","");o=parseInt(t.substring(0,2),16);r=parseInt(t.substring(2,4),16);s=parseInt(t.substring(4,6),16);l=t.length===8?parseInt(t.substring(6,8),16):1}else{a=t.replace("rgb","").replace("a","").replace(/\s+/g,"").replace("(","").replace(")","").split(",");o=parseInt(a[0]);r=parseInt(a[1]);s=parseInt(a[2]);l=a.length===4?parseInt(a[3]):1}this.setRGB(o,r,s);this._a=l}});L.rgbColor=function(t){return new L.RGBColor(t)};L.HSLColor=L.Color.extend({initialize:function(t){L.Color.prototype.initialize.call(this,t)},parseColorDef:function(t){var e=t instanceof Array;var i,a,n,o;if(e){i=t[0];a=t[1];n=t[2];o=t.length===4?t[3]:1}else{var r=t.replace("hsl","").replace("a","").replace("(","").replace(/\s+/g,"").replace(/%/g,"").replace(")","").split(",");i=Number(r[0])/360;a=Number(r[1])/100;n=Number(r[2])/100;o=r.length===4?parseInt(r[3]):1}this.setHSL(i,a,n);this._a=o}});L.hslColor=function(t){return new L.HSLColor(t)};L.ColorUtils={rgbArrayToString:function(t){var e=[];for(var i=0;i<t.length;++i){var a=Math.round(t[i]).toString(16);if(a.length===1){a="0"+a}e.push(a)}return"#"+e.join("")},rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var a=Math.max(t,e,i),n=Math.min(t,e,i);var o,r,s=(a+n)/2;if(a==n){o=r=0}else{var l=a-n;r=s>.5?l/(2-a-n):l/(a+n);switch(a){case t:o=(e-i)/l+(e<i?6:0);break;case e:o=(i-t)/l+2;break;case i:o=(t-e)/l+4;break}o/=6}return[o,r,s]},hslToRgb:function(t,e,i){var a,n,o;if(e==0){a=n=o=i}else{function r(t,e,i){if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return t+(e-t)*6*i;if(i<1/2)return e;if(i<2/3)return t+(e-t)*(2/3-i)*6;return t}var s=i<.5?i*(1+e):i+e-i*e;var l=2*i-s;a=r(l,s,t+1/3);n=r(l,s,t);o=r(l,s,t-1/3)}return[a*255,n*255,o*255]},rgbToHsv:function(t,e,i){t=t/255,e=e/255,i=i/255;var a=Math.max(t,e,i),n=Math.min(t,e,i);var o,r,s=a;var l=a-n;r=a==0?0:l/a;if(a==n){o=0}else{switch(a){case t:o=(e-i)/l+(e<i?6:0);break;case e:o=(i-t)/l+2;break;case i:o=(t-e)/l+4;break}o/=6}return[o,r,s]},hsvToRgb:function(t,e,i){var a,n,o;var r=Math.floor(t*6);var s=t*6-r;var l=i*(1-e);var f=i*(1-s*e);var c=i*(1-(1-s)*e);switch(r%6){case 0:a=i,n=c,o=l;break;case 1:a=f,n=i,o=l;break;case 2:a=l,n=i,o=c;break;case 3:a=l,n=f,o=i;break;case 4:a=c,n=l,o=i;break;case 5:a=i,n=l,o=f;break}return[a*255,n*255,o*255]}};L.ColorUtils.rgbStringToRgb=function(t){var e=t.indexOf("#")===0;var i=[];var a=[];if(e){t=t.replace("#","");r=t.substring(0,2);g=t.substring(2,4);b=t.substring(4,6);a=[r,g,b]}else{i=t.replace("rgb(","").replace(")","").split(",");a=i}return a};L.ColorUtils.hslToRgbString=function(t,e,i){return L.ColorUtils.rgbArrayToString(L.ColorUtils.hslToRgb(t,e,i))};L.ColorUtils.hslStringToRgbString=function(t){var e=t.replace("hsl(","").replace(")","").split(",");var i=Number(e[0])/360;var a=Number(e[1].replace("%",""))/100;var n=Number(e[2].replace("%",""))/100;return L.ColorUtils.hslToRgbString(i,a,n)};L.ColorBrewer={Sequential:{YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]}},Diverging:{PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]}},Qualitative:{Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}};
L.Palettes={huePalette:function(t,e,i,a,n){return new L.HSLHueFunction(new L.Point(t,i),new L.Point(e,a),n)},luminosityPalette:function(t,e,i,a,n){return new L.HSLLuminosityFunction(new L.Point(t,i),new L.Point(e,a),n)},saturationPalette:function(t,e,i,a,n){return new L.HSLSaturationFunction(new L.Point(t,i),new L.Point(e,a),n)},rgbBlendPalette:function(t,e,i,a,n){return new L.RGBColorBlendFunction(t,e,i,a,n)},hslBlendPalette:function(t,e,i,a,n){return new L.HSLColorBlendFunction(t,e,i,a,n)},customColorPalette:function(t,e,i,a){return new L.CustomColorFunction(t,e,i,a)}};L.DynamicColorPalettes={rainbow:{text:"Rainbow",getPalette:function(t,e){return L.Palettes.huePalette(t,e,0,300)}},greentored:{text:"Green - Red",getPalette:function(t,e){return L.Palettes.huePalette(t,e,120,0)}},yellowtored:{text:"Yellow - Red",getPalette:function(t,e){return L.Palettes.huePalette(t,e,60,0)}},orangetored:{text:"Orange - Red",getPalette:function(t,e){return L.Palettes.huePalette(t,e,30,0)}},redtopurple:{text:"Red - Purple",getPalette:function(t,e){return L.Palettes.huePalette(t,e,360,270)}},bluetored:{text:"Blue - Red",getPalette:function(t,e){return L.Palettes.huePalette(t,e,210,360)}},bluetored2:{text:"Blue - Red 2",getPalette:function(t,e){return L.Palettes.huePalette(t,e,180,0)}},whitetored:{text:"White - Red",getPalette:function(t,e){return L.Palettes.luminosityPalette(t,e,1,.5,{outputHue:0})}},whitetoorange:{text:"White - Orange",getPalette:function(t,e){return L.Palettes.luminosityPalette(t,e,1,.5,{outputHue:30})}},whitetoyellow:{text:"White - Yellow",getPalette:function(t,e){return L.Palettes.luminosityPalette(t,e,1,.5,{outputHue:60})}},whitetogreen:{text:"White - Green",getPalette:function(t,e){return L.Palettes.luminosityPalette(t,e,1,.5,{outputHue:120})}},whitetoltblue:{text:"White - Lt. Blue",getPalette:function(t,e){return L.Palettes.luminosityPalette(t,e,1,.5,{outputHue:180})}},whitetoblue:{text:"White - Blue",getPalette:function(t,e){return L.Palettes.luminosityPalette(t,e,1,.5,{outputHue:240})}},whitetopurple:{text:"White - Purple",getPalette:function(t,e){return L.Palettes.luminosityPalette(t,e,1,.5,{outputHue:270})}},graytored:{text:"Gray - Red",getPalette:function(t,e){return L.Palettes.saturationPalette(t,e,0,1,{outputHue:0})}},graytoorange:{text:"Gray - Orange",getPalette:function(t,e){return L.Palettes.saturationPalette(t,e,0,1,{outputHue:30})}},graytoyellow:{text:"Gray - Yellow",getPalette:function(t,e){return L.Palettes.saturationPalette(t,e,0,1,{outputHue:60})}},graytogreen:{text:"Gray - Green",getPalette:function(t,e){return L.Palettes.saturationPalette(t,e,0,1,{outputHue:120})}},graytoltblue:{text:"Gray - Lt. Blue",getPalette:function(t,e){return L.Palettes.saturationPalette(t,e,0,1,{outputHue:180})}},graytoblue:{text:"Gray - Blue",getPalette:function(t,e){return L.Palettes.saturationPalette(t,e,0,1,{outputHue:240})}},graytopurple:{text:"Gray - Purple",getPalette:function(t,e){return L.Palettes.saturationPalette(t,e,0,1,{outputHue:270})}}};L.DynamicPaletteElement=L.Class.extend({initialize:function(t,e){this._key=t;this._dynamicPalette=e},generate:function(t){var e=L.DomUtil.create("div","palette");var i=t.count;var a=this._dynamicPalette.getPalette(0,i-1);var n=t.width;var o=true;if(t.showText!=undefined){o=t.showText}e.setAttribute("data-palette-key",this._key);if(this._dynamicPalette.text&&o){L.DomUtil.create("div","palette-text",e).innerHTML='<i class="icon-ok hidden"></i>'+this._dynamicPalette.text}var r=n/i;if(t.className){L.DomUtil.addClass(e,t.className)}for(var s=0;s<i;++s){var s=L.DomUtil.create("i","palette-element");for(var l in a){var f=a[l];var c=f.evaluate?f.evaluate(s):f;L.StyleConverter.setCSSProperty(s,l,c)}s.style.width=r+"px";e.appendChild(s)}return e}});L.RegularPolygon=L.Polygon.extend({statics:{R:6378.137,M_PER_KM:1e3},initialize:function(t,e){this._centerLatLng=t;L.Util.setOptions(this,e);L.Polygon.prototype.initialize.call(this,this._getLatLngs(),e)},options:{fill:true,radius:1e3,numberOfSides:4,rotation:0,maxDegrees:360},getLatLng:function(){return this._centerLatLng},setRadius:function(t){this.options.radius=t;this._latlngs=this._getLatLngs();this.redraw()},_getLatLngs:function(){var t=this.options.maxDegrees||360;var e=t/Math.max(this.options.numberOfSides,3);var i=t+this.options.rotation;var a=this.options.rotation;var n=[];var o;var r;var s;while(a<i){o=this._getPoint(a);n.push(o);a+=e}return n},_getPoint:function(t){var e=function(t){return t*L.LatLng.DEG_TO_RAD};var i=function(t){return t*L.LatLng.RAD_TO_DEG};var a=e(t);var n=this.options.radius/L.RegularPolygon.M_PER_KM/L.RegularPolygon.R;var o=e(this._centerLatLng.lat);var r=e(this._centerLatLng.lng);var s=Math.asin(Math.sin(o)*Math.cos(n)+Math.cos(o)*Math.sin(n)*Math.cos(a));var l=r+Math.atan2(Math.sin(a)*Math.sin(n)*Math.cos(o),Math.cos(n)-Math.sin(o)*Math.sin(s));s=i(s);l=i(l);return new L.LatLng(s,l)}});L.regularPolygon=function(t,e){return new L.RegularPolygon(t,e)};L.Path.XLINK_NS="http://www.w3.org/1999/xlink";var TextFunctions=TextFunctions||{__updatePath:L.Path.prototype._updatePath,_updatePath:function(){this.__updatePath.call(this);if(this.options.text){this._createText(this.options.text)}},_initText:function(){if(this.options.text){this._createText(this.options.text)}},getTextAnchor:function(){if(this._point){return this._point}},setTextAnchor:function(t){if(this._text){this._text.setAttribute("x",t.x);this._text.setAttribute("y",t.y)}},_createText:function(t){if(this._text){this._container.removeChild(this._text)}if(this._pathDef){this._defs.removeChild(this._pathDef)}var e=function(t,e){var i="";for(var a in e){i+=a+": "+e[a]+";"}t.setAttribute("style",i);return t};var i=function(t,e){for(var i in e){t.setAttribute(i,e[i])}return t};this._text=this._createElement("text");var a=document.createTextNode(t.text);if(t.path){var n=t.path;var o=L.Util.guid();var r=this._createElement("path");r.setAttribute("d",this._path.getAttribute("d"));r.setAttribute("id",o);if(!this._defs){this._defs=this._createElement("defs");this._container.appendChild(this._defs)}this._defs.appendChild(r);this._pathDef=r;var s=this._createElement("textPath");if(n.startOffset){s.setAttribute("startOffset",n.startOffset)}if(n.attr){i(s,n.attr)}if(n.style){e(s,n.style)}s.setAttributeNS(L.Path.XLINK_NS,"xlink:href","#"+o);s.appendChild(a);this._text.appendChild(s)}else{this._text.appendChild(a);var l=this.getTextAnchor();this.setTextAnchor(l)}if(t.className){this._text.setAttribute("class",t.className)}else{this._text.setAttribute("class","leaflet-svg-text")}if(t.attr){i(this._text,t.attr)}if(t.style){e(this._text,t.style)}this._container.appendChild(this._text)}};var PathFunctions=PathFunctions||{__updateStyle:L.Path.prototype._updateStyle,_createDefs:function(){this._defs=this._createElement("defs");this._container.appendChild(this._defs)},_createGradient:function(t){if(!this._defs){this._createDefs()}if(this._gradient){this._defs.removeChild(this._gradient)}var e=this._createElement("linearGradient");var i=L.Util.guid();this._gradientGuid=i;t=t!==true?L.extend({},t):{};var a=t.vector||[["0%","0%"],["100%","100%"]];var n={x1:a[0][0],x2:a[1][0],y1:a[0][1],y2:a[1][1]};n.id="grad"+i;var o=t.stops||[{offset:"0%",style:{color:"rgb(255, 255, 255)",opacity:1}},{offset:"60%",style:{color:this.options.fillColor||this.options.color,opacity:1}}];for(var r in n){e.setAttribute(r,n[r])}for(var s=0;s<o.length;++s){var l=o[s];var f=this._createElement("stop");l.style=l.style||{};for(var r in l){var c=l[r];if(r==="style"){var d="";c.color=c.color||(this.options.fillColor||this.options.color);c.opacity=typeof c.opacity==="undefined"?1:c.opacity;for(var u in c){d+="stop-"+u+":"+c[u]+";"}c=d}f.setAttribute(r,c)}e.appendChild(f)}this._gradient=e;this._defs.appendChild(e)},_createDropShadow:function(t){if(!this._defs){this._createDefs()}if(this._dropShadow){this._defs.removeChild(this._dropShadow)}var e=L.Util.guid();var i=this._createElement("filter");var a=this._createElement("feOffset");var n=this._createElement("feGaussianBlur");var o=this._createElement("feBlend");t=t||{width:"200%",height:"200%"};t.id="filter"+e;for(var r in t){i.setAttribute(r,t[r])}var s={result:"offOut","in":"SourceAlpha",dx:"2",dy:"2"};var l={result:"blurOut","in":"offOut",stdDeviation:"2"};var f={"in":"SourceGraphic",in2:"blurOut",mode:"lighten"};for(var r in s){a.setAttribute(r,s[r])}for(var r in l){n.setAttribute(r,l[r])}for(var r in f){o.setAttribute(r,f[r])}i.appendChild(a);i.appendChild(n);i.appendChild(o);this._dropShadow=i;this._defs.appendChild(i)},_createCustomElement:function(t,e){var i=this._createElement(t);for(var a in e){if(e.hasOwnProperty(a)){i.setAttribute(a,e[a])}}return i},_createImage:function(t){var e=this._createElement("image");e.setAttribute("width",t.width);e.setAttribute("height",t.height);e.setAttribute("x",t.x||0);e.setAttribute("y",t.y||0);e.setAttributeNS(L.Path.XLINK_NS,"xlink:href",t.url);return e},_createPattern:function(t){var e=this._createCustomElement("pattern",t);return e},_createShape:function(t,e){var i=this._createCustomElement(t,e);return i},_applyCustomStyles:function(){},_createFillPattern:function(t){var e=L.Util.guid();var i=t.pattern;i.id=e;i.patternUnits=i.patternUnits||"objectBoundingBox";var a=this._createPattern(i);var n=this._createImage(t.image);n.setAttributeNS(L.Path.XLINK_NS,"xlink:href",t.url);a.appendChild(n);if(!this._defs){this._createDefs()}this._defs.appendChild(a);this._path.setAttribute("fill","url(#"+e+")")},_getDefaultDiameter:function(t){return 1.75*t},_createShapeImage:function(t){t=t||{};var e=L.Util.guid();var i=this.options.radius||Math.max(this.options.radiusX,this.options.radiusY);var a=this._getDefaultDiameter(i);var n=t.imageSize||new L.Point(a,a);var o=t.radius||a/2;var r=t.shape||{circle:{r:o,cx:0,cy:0}};var s=t.pattern||{width:n.x,height:n.y,x:0,y:0};var l=Object.keys(r);var f=l.length>0?l[0]:"circle";r[f].fill="url(#"+e+")";var c=this._createShape(f,r[f]);if(this.options.clickable){c.setAttribute("class","leaflet-clickable")}s.id=e;s.patternUnits=s.patternUnits||"objectBoundingBox";var d=this._createPattern(s);var t=t.image||{width:n.x,height:n.y,x:0,y:0,url:this.options.imageCircleUrl};var u=this._createImage(t);u.setAttributeNS(L.Path.XLINK_NS,"xlink:href",t.url);d.appendChild(u);this._defs.appendChild(d);this._container.insertBefore(c,this._defs);this._shape=c},_updateStyle:function(){this.__updateStyle.call(this);if(this.options.stroke){if(this.options.lineCap){this._path.setAttribute("stroke-linecap",this.options.lineCap)}if(this.options.lineJoin){this._path.setAttribute("stroke-linejoin",this.options.lineJoin)}}if(this.options.gradient){this._createGradient(this.options.gradient);this._path.setAttribute("fill","url(#"+this._gradient.getAttribute("id")+")")}else if(!this.options.fill){this._path.setAttribute("fill","none")}if(this.options.dropShadow){this._createDropShadow();this._path.setAttribute("filter","url(#"+this._dropShadow.getAttribute("id")+")")}else{this._path.removeAttribute("filter")}this._applyCustomStyles()}};var LineTextFunctions=L.extend({},TextFunctions);LineTextFunctions.__updatePath=L.Polyline.prototype._updatePath;LineTextFunctions.getCenter=function(){var t=this._latlngs,e=t.length,i,a,n,o,r,s;for(i=0,a=e-1,area=0,lat=0,lng=0;i<e;a=i++){n=t[i];o=t[a];r=n.lat*o.lng-o.lat*n.lng;lat+=(n.lat+o.lat)*r;lng+=(n.lng+o.lng)*r;area+=r/2}s=area?new L.LatLng(lat/(6*area),lng/(6*area)):t[0];s.area=area;return s};LineTextFunctions.getTextAnchor=function(){var t=this.getCenter();return this._map.latLngToLayerPoint(t)};L.Polyline.include(LineTextFunctions);L.CircleMarker.include(TextFunctions);L.Path.include(PathFunctions);L.Polygon.include(PathFunctions);L.Polyline.include(PathFunctions);L.CircleMarker.include(PathFunctions);L.Point.prototype.rotate=function(t,e){var i=this.distanceTo(e);var a=t*L.LatLng.DEG_TO_RAD+Math.atan2(this.y-e.y,this.x-e.x);this.x=e.x+i*Math.cos(a);this.y=e.y+i*Math.sin(a)};L.MapMarker=L.Path.extend({includes:TextFunctions,initialize:function(t,e){L.Path.prototype.initialize.call(this,e);this._latlng=t},options:{fill:true,fillOpacity:1,opacity:1,radius:15,innerRadius:5,position:{x:0,y:0},rotation:0,numberOfSides:50,color:"#000000",fillColor:"#0000FF",weight:1,gradient:true,dropShadow:true,clickable:true},setLatLng:function(t){this._latlng=t;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints();if(this.options.innerRadius>0){this._innerPoints=this._getPoints(true).reverse()}},getBounds:function(){var t=this._map,e=this.options.radius*3,i=t.project(this._latlng),a=new L.Point(i.x-this.options.radius,i.y),n=new L.Point(i.x+this.options.radius,i.y-e),o=t.unproject(a),r=t.unproject(n);return new L.LatLngBounds(o,r)},getLatLng:function(){return this._latlng},getPathString:function(){var t=this.getTextAnchor();if(this._shape){if(this._shape.tagName==="circle"){this._shape.setAttribute("cx",t.x);this._shape.setAttribute("cy",t.y)}else{this._shape.setAttribute("x",t.x);this._shape.setAttribute("y",t.y)}}this._path.setAttribute("shape-rendering","geometricPrecision");return new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},getTextAnchor:function(){return new L.Point(this._point.x,this._point.y-2*this.options.radius)},_getPoints:function(t){var e=!t?210:360;var i=!t?e/50:e/Math.max(this.options.numberOfSides,3);var a=!t?e:e+this.options.rotation;var n=!t?-30:this.options.rotation;var o=[];var r;var s;var l=this.options.radius;var f=Math.sqrt(.75);var c=function(t){return t*L.LatLng.DEG_TO_RAD};var d=this._point;if(!t){o.push(d);o.push(new L.Point(d.x+f*l,d.y-1.5*l))}while(n<a){s=c(n);r=this._getPoint(s,l,t);o.push(r);n+=i}if(!t){o.push(new L.Point(d.x-f*l,d.y-1.5*l))}return o},_getPoint:function(t,e,i){var a=e;e=!i?e:this.options.innerRadius;return new L.Point(this._point.x+this.options.position.x+e*Math.cos(t),this._point.y-2*a+this.options.position.y-e*Math.sin(t))},_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}else if(this.options.fillPattern){this._createFillPattern(this.options.fillPattern)}}});L.mapMarker=function(t,e){return new L.MapMarker(t,e)};L.RegularPolygonMarker=L.Path.extend({includes:TextFunctions,initialize:function(t,e){L.Path.prototype.initialize.call(this,e);this._latlng=t;this.options.numberOfSides=Math.max(this.options.numberOfSides,3)},options:{fill:true,radiusX:10,radiusY:10,rotation:0,numberOfSides:3,position:{x:0,y:0},maxDegrees:360,gradient:true,dropShadow:false,clickable:true},setLatLng:function(t){this._latlng=t;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints();if(this.options.innerRadius||this.options.innerRadiusX&&this.options.innerRadiusY){this._innerPoints=this._getPoints(true).reverse()}},getBounds:function(){var t=this._map,e=this.options.radius||this.options.radiusX,i=this.options.radius||this.options.radiusY,a=e*Math.cos(Math.PI/4),n=i*Math.sin(Math.PI/4),o=t.project(this._latlng),r=new L.Point(o.x-a,o.y+n),s=new L.Point(o.x+a,o.y-n),l=t.unproject(r),f=t.unproject(s);return new L.LatLngBounds(l,f)},getLatLng:function(){return this._latlng},getPathString:function(){this._path.setAttribute("shape-rendering","geometricPrecision");var t=this.getTextAnchor();if(this._shape){if(this._shape.tagName==="circle"){this._shape.setAttribute("cx",t.x);this._shape.setAttribute("cy",t.y)}else{this._shape.setAttribute("x",t.x);this._shape.setAttribute("y",t.y)}}return new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},_getPoints:function(t){var e=this.options.maxDegrees||360;var i=e/Math.max(this.options.numberOfSides,3);var a=e;var n=0;var o=[];var r;var s;var l=!t?this.options.radius||this.options.radiusX:this.options.innerRadius||this.options.innerRadiusX;var f=!t?this.options.radius||this.options.radiusY:this.options.innerRadius||this.options.innerRadiusY;var c=function(t){return t*L.LatLng.DEG_TO_RAD};while(n<a){s=c(n);r=this._getPoint(s,l,f);o.push(r);n+=i}return o},_getPoint:function(t,e,i){var a=this.options.position?this._point.add(new L.Point(this.options.position.x,this.options.position.y)):this._point;var n=new L.Point(a.x+e*Math.cos(t),a.y+i*Math.sin(t));n.rotate(this.options.rotation,a);return n},_getDefaultDiameter:function(t){var e=Math.PI/this.options.numberOfSides;var i=t*Math.cos(e);return 1.75*i},_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}else if(this.options.fillPattern){this._createFillPattern(this.options.fillPattern)}}});L.regularPolygonMarker=function(t,e){return new L.RegularPolygonMarker(t,e)};L.StarMarker=L.RegularPolygonMarker.extend({options:{numberOfPoints:5,rotation:-15,maxDegrees:360,gradient:true,dropShadow:true},_getPoints:function(t){var e=this.options.maxDegrees||360;var i=e/this.options.numberOfPoints;var a=e;var n=0;var o=[];var r,s;var l;var f=!t?this.options.radius||this.options.radiusX:this.options.innerRadius||this.options.innerRadiusX;var c=!t?this.options.radius||this.options.radiusY:this.options.innerRadius||this.options.innerRadiusY;var d=function(t){return t*L.LatLng.DEG_TO_RAD};while(n<a){l=d(n);r=this._getPoint(l,f,c);s=this._getPoint(l+d(i)/2,f/2,c/2);o.push(r);o.push(s);n+=i}return o}});L.starMarker=function(t,e){return new L.StarMarker(t,e)};L.TriangleMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:3,rotation:30,radius:5}});L.triangleMarker=function(t,e){return new L.TriangleMarker(t,e)};L.DiamondMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,radiusX:5,radiusY:10}});L.diamondMarker=function(t,e){return new L.DiamondMarker(t,e)};L.SquareMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,rotation:45,radius:5}});L.squareMarker=function(t,e){return new L.SquareMarker(t,e)};L.PentagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:5,rotation:-18,radius:5}});L.pentagonMarker=function(t,e){return new L.PentagonMarker(t,e)};L.HexagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:6,rotation:30,radius:5}});L.hexagonMarker=function(t,e){return new L.HexagonMarker(t,e)};L.OctagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:8,rotation:22.5,radius:5}});L.octagonMarker=function(t,e){return new L.OctagonMarker(t,e)};L.SVGMarker=L.Path.extend({initialize:function(t,e){L.Path.prototype.initialize.call(this,e);this._svg=e.svg;if(this._svg.indexOf("<")===0){this._data=this._svg}this._latlng=t},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},getPathString:function(){var t=this;var e=function(){var e=t._path.parentNode;while(e.nodeName.toLowerCase()!=="g"){e=e.parentNode}if(t.options.clickable){e.setAttribute("class","leaflet-clickable")}var i=t._data;var a=i.nodeName.toLowerCase()==="svg"?i.cloneNode(true):i.querySelector("svg").cloneNode(true);if(t.options.setStyle){t.options.setStyle.call(t,a)}var n=a.getAttribute("width");var o=a.getAttribute("height");var r=n?n.replace("px",""):"100%";var s=o?o.replace("px",""):"100%";if(r==="100%"){r=t.options.size.x;s=t.options.size.y;a.setAttribute("width",r);a.setAttribute("height",s+(s.indexOf("%")!==-1?"":"px"))}var l=t.options.size||new L.Point(r,s);var f=new L.Point(l.x/r,l.y/s);var c=e.getElementsByTagName("svg");if(c.length>0){c[0].parentNode.removeChild(c[0])}e.appendChild(a);var d=[];var u=t.options.anchor||new L.Point(-l.x/2,-l.y/2);var h=t._point.x+u.x;var p=t._point.y+u.y;d.push("translate("+h+" "+p+")");d.push("scale("+f.x+" "+f.y+")");if(t.options.rotation){d.push("rotate("+t.options.rotation+" "+r/2+" "+s/2+")")}e.setAttribute("transform",d.join(" "))};if(!this._data){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(this.readyState==4&&this.status==200){t._data=this.responseXML;e()}};i.open("GET",this._svg,true);i.send(null)}else{e()}}});L.BarMarker=L.Path.extend({initialize:function(t,e){L.Path.prototype.initialize.call(this,e);this._latlng=t},options:{fill:true,width:2,maxHeight:10,position:{x:0,y:0},weight:1,color:"#000",opacity:1,gradient:true,dropShadow:false,lineCap:"square",lineJoin:"miter"},setLatLng:function(t){this._latlng=t;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getBounds:function(){var t=this._map,e=t.project(this._latlng),i=this.options.width/2,a=new L.Point(e.x-i,e.y),n=new L.Point(e.x+i,e.y-this.options.maxHeight),o=t.unproject(a),r=t.unproject(n);return new L.LatLngBounds(o,r)},getLatLng:function(){return this._latlng},getPathString:function(){this._path.setAttribute("shape-rendering","crispEdges");return new L.SVGPathBuilder(this._points).build()},_getPoints:function(){var t=[];var e=this._point.x+this.options.position.x;var i=this._point.y+this.options.position.y;var a=this.options.width/2;var n,o,r,s;var l=this.options.value/this.options.maxValue*this.options.maxHeight;n=new L.Point(e+a,i);o=new L.Point(e+a,i-l);r=new L.Point(e-a,i-l);s=new L.Point(e-a,i);t=[n,o,r,s];return t}});L.barMarker=function(t,e){return new L.BarMarker(t,e)};L.ChartMarker=L.FeatureGroup.extend({initialize:function(t,e){L.Util.setOptions(this,e);this._layers={};this._latlng=t;this._loadComponents()},setLatLng:function(t){this._latlng=t;return this.redraw()},getLatLng:function(){return this._latlng},_loadComponents:function(){},_highlight:function(t){if(t.weight){t.weight*=2}return t},_unhighlight:function(t){if(t.weight){t.weight/=2}return t},_bindMouseEvents:function(t){var e=this;var i=this.options.tooltipOptions;t.on("mouseover",function(t){var a=this.options;var n=a.key;var o=a.value;var r=t.layerPoint;var s=r.x-this._point.x;var l=r.y-this._point.y;var f=a.iconSize;var c=s;var d=l;var u;var h=5;c=s<0?f.x-s+h:-s-h;d=l<0?f.y-l+h:-l-h;u=new L.Point(c,d);var p={};var b=a.displayText?a.displayText(o):o;p[n]={name:a.displayName,value:b};var v=new L.LegendIcon(p,a,{className:"leaflet-div-icon",iconSize:i?i.iconSize:f,iconAnchor:u});a.marker=new L.Marker(e._latlng,{icon:v});a=e._highlight(a);this.initialize(e._latlng,a);this.redraw();this.setStyle(a);e.addLayer(a.marker)});t.on("mouseout",function(t){var i=this.options;i=e._unhighlight(i);this.initialize(e._latlng,i);this.redraw();this.setStyle(i);e.removeLayer(i.marker)})},bindPopup:function(t,e){this.eachLayer(function(i){i.bindPopup(t,e)})},openPopup:function(t){for(var e in this._layers){var i=this._layers[e];t=t||this._latlng;i.openPopup(t);break}},closePopup:function(){for(var t in this._layers){var e=this._layers[t];latlng=latlng||this._latlng;e.closePopup();break}},redraw:function(){this.clearLayers();this._loadComponents()}});L.BarChartMarker=L.ChartMarker.extend({initialize:function(t,e){L.Util.setOptions(this,e);L.ChartMarker.prototype.initialize.call(this,t,e)},options:{weight:1,opacity:1,color:"#000",fill:true,position:{x:0,y:0},width:10,offset:0,iconSize:new L.Point(50,40)},_loadComponents:function(){var t,e,i;var a=this.options.rotation;var n=0;var o=this.options.maxDegrees||360;var r;var s=this.options;var l;var f=this.options.radiusX||this.options.radius;var c=this.options.radiusY||this.options.radius;var d;var u;var h=Object.keys(this.options.data);var p=h.length;var b=this.options.width;var v=this.options.offset||0;var g=this.options.data;var y=this.options.chartOptions;var _;d=-(b*p+v*(p-1))/2+b/2;u=0;for(var m in g){t=g[m];_=y[m];e=_.minValue||0;i=_.maxValue||100;var P=i-e;s.fillColor=_.fillColor||this.options.fillColor;s.value=t;s.minValue=e;s.maxValue=i;s.position={x:d,y:u};s.width=b;s.maxHeight=_.maxHeight||10;s.key=m;s.value=t;s.displayName=_.displayName;s.opacity=this.options.opacity||1;s.fillOpacity=this.options.fillOpacity||.7;s.weight=this.options.weight||1;s.color=_.color||this.options.color;s.displayText=_.displayText;r=new L.BarMarker(this._latlng,s);this._bindMouseEvents(r);this.addLayer(r);d+=b+v}}});L.RadialBarMarker=L.Path.extend({initialize:function(t,e){L.Path.prototype.initialize.call(this,e);this._latlng=t},options:{fill:true,radius:10,rotation:0,numberOfSides:30,position:{x:0,y:0},gradient:true,dropShadow:false},setLatLng:function(t){this._latlng=t;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getBounds:function(){var t=this._map,e=this.options.radiusX||this.options.radius,i=this.options.radiusY||this.options.radius,a=e*Math.cos(Math.PI/4),n=i*Math.sin(Math.PI/4),o=t.project(this._latlng),r=new L.Point(o.x-a,o.y+n),s=new L.Point(o.x+a,o.y-n),l=t.unproject(r),f=t.unproject(s);return new L.LatLngBounds(l,f)},getLatLng:function(){return this._latlng},getPathString:function(){var t=this.options.endAngle-this.options.startAngle;var e=t>=180?"1":"0";var i=this.options.radiusX||this.options.radius;var a=this.options.radiusY||this.options.radius;var n="M"+this._points[0].x.toFixed(2)+","+this._points[0].y.toFixed(2)+"A"+i.toFixed(2)+","+a.toFixed(2)+" 0 "+e+",1 "+this._points[1].x.toFixed(2)+","+this._points[1].y.toFixed(2)+"L";if(this._innerPoints){n=n+this._innerPoints[0].x.toFixed(2)+","+this._innerPoints[0].y.toFixed(2);n=n+"A"+(i-this.options.barThickness).toFixed(2)+","+(a-this.options.barThickness).toFixed(2)+" 0 "+e+",0 "+this._innerPoints[1].x.toFixed(2)+","+this._innerPoints[1].y.toFixed(2)+"z"}else{n=n+this._point.x.toFixed(2)+","+this._point.y.toFixed(2)+"z"}if(L.Browser.vml){n=Core.SVG.path(n)}this._path.setAttribute("shape-rendering","geometricPrecision");return n},_getPoints:function(){var t=this.options.endAngle-this.options.startAngle;var e=t/this.options.numberOfSides;var i=this.options.endAngle+this.options.rotation;var a=this.options.startAngle+this.options.rotation;var n=[];var o=[];var r,s;var l;var f="radiusX"in this.options?this.options.radiusX:this.options.radius;var c="radiusY"in this.options?this.options.radiusY:this.options.radius;var d=function(t){return t*L.LatLng.DEG_TO_RAD};if(t===360){i=i-.1}var u=d(a);var h=d(i);n.push(this._getPoint(u,f,c));n.push(this._getPoint(h,f,c));if(this.options.barThickness){this._innerPoints=[];var p=f-this.options.barThickness;var b=c-this.options.barThickness;this._innerPoints.push(this._getPoint(h,f-this.options.barThickness,c-this.options.barThickness));this._innerPoints.push(this._getPoint(u,f-this.options.barThickness,c-this.options.barThickness))}return n},_getPoint:function(t,e,i){return new L.Point(this._point.x+this.options.position.x+e*Math.cos(t),this._point.y+this.options.position.y+i*Math.sin(t))}});L.radialBarMarker=function(t,e){return new L.RadialBarMarker(t,e)};L.PieChartMarker=L.ChartMarker.extend({initialize:function(t,e){L.Util.setOptions(this,e);L.ChartMarker.prototype.initialize.call(this,t,e)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40)},_highlight:function(t){var e=t.radiusX;var i=t.radiusY;var a=t.barThickness;t.oldBarThickness=a;t.oldRadiusX=e;t.oldRadiusY=i;t.radiusX*=t.mouseOverExaggeration;t.radiusY*=t.mouseOverExaggeration;t.barThickness=t.radiusX-e+a;return t},_unhighlight:function(t){t.radiusX=t.oldRadiusX;t.radiusY=t.oldRadiusY;t.barThickness=t.oldBarThickness;return t},_loadComponents:function(){var t;var e=0;var i=0;var a=0;var n=this.options.maxDegrees||360;var o=this.options.rotation;var r;var s=this.options;var l;var f=this.options.data;var c=this.options.chartOptions;var d;var u;var h=function(t,e){var i=0;if(t[e]){i=parseFloat(t[e])}return i};for(u in f){t=h(f,u);e+=t}if(e>0){for(u in f){t=parseFloat(f[u]);d=c[u];a=t/e;i=a*n;s.startAngle=o;s.endAngle=o+i;s.fillColor=d.fillColor;s.color=d.color||"#000";s.radiusX=this.options.radiusX||this.options.radius;s.radiusY=this.options.radiusY||this.options.radius;s.rotation=0;s.key=u;s.value=t;s.displayName=d.displayName;s.displayText=d.displayText;r=new L.RadialBarMarker(this._latlng,s);this._bindMouseEvents(r);o=s.endAngle;this.addLayer(r)}}}});L.pieChartMarker=function(t,e){return new L.PieChartMarker(t,e)};L.CoxcombChartMarker=L.PieChartMarker.extend({statics:{SIZE_MODE_RADIUS:"radius",SIZE_MODE_AREA:"area"}});L.CoxcombChartMarker=L.CoxcombChartMarker.extend({initialize:function(t,e){L.Util.setOptions(this,e);L.PieChartMarker.prototype.initialize.call(this,t,e)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40),sizeMode:L.CoxcombChartMarker.SIZE_MODE_AREA},_loadComponents:function(){var t,e,i;var a=0;var n=0;var o=0;var r=this.options.maxDegrees||360;var s=this.options.rotation;var l;var f=this.options;var c;var d="radiusX"in this.options?this.options.radiusX:this.options.radius;var u="radiusY"in this.options?this.options.radiusY:this.options.radius;var h=Object.keys(this.options.data);var p=h.length;var b=this.options.data;var v=this.options.chartOptions;var g;n=r/p;for(var y in b){t=parseFloat(b[y]);g=v[y];var e=g.minValue||0;var i=g.maxValue;if(this.options.sizeMode===L.CoxcombChartMarker.SIZE_MODE_RADIUS){var _=new L.LinearFunction(new L.Point(e,0),new L.Point(i,d));var m=new L.LinearFunction(new L.Point(e,0),new L.Point(i,u));f.radiusX=_.evaluate(t);f.radiusY=m.evaluate(t)}else{var P=Math.max(d,u);var x=Math.PI*Math.pow(P,2)/p;var w=new L.LinearFunction(new L.Point(e,0),new L.Point(i,x),{postProcess:function(t){return Math.sqrt(p*t/Math.PI)}});f.radiusX=w.evaluate(t);f.radiusY=f.radiusX}f.startAngle=s;f.endAngle=s+n;f.fillColor=g.fillColor;f.color=g.color||"#000";f.rotation=0;f.key=y;f.value=t;f.displayName=g.displayName;f.displayText=g.displayText;l=new L.RadialBarMarker(this._latlng,f);this._bindMouseEvents(l);s=f.endAngle;this.addLayer(l)}}});L.coxcombChartMarker=function(t,e){return new L.CoxcombChartMarker(t,e)};L.RadialBarChartMarker=L.ChartMarker.extend({initialize:function(t,e){L.Util.setOptions(this,e);L.ChartMarker.prototype.initialize.call(this,t,e)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:30,offset:2,barThickness:5,maxDegrees:360,iconSize:new L.Point(50,40)},_loadComponents:function(){var t,e,i;var a=this.options.rotation;var n=0;var o=this.options.maxDegrees||360;var r;var s=this.options;var l;var f=0;var c=this.options.radiusX||this.options.radius;var d=this.options.radiusY||this.options.radius;var u=this.options.data;var h=this.options.chartOptions;var p;var b=this.options.barThickness||4;var v=this.options.offset||2;for(var g in u){t=parseFloat(u[g]);p=h[g];e=p.minValue||0;i=p.maxValue||100;var y=new L.LinearFunction(new L.Point(e,0),new L.Point(i,o));a=y.evaluate(t);s.startAngle=this.options.rotation;s.endAngle=this.options.rotation+a;s.fillColor=p.fillColor;s.radiusX=c;s.radiusY=d;s.barThickness=b;s.rotation=0;s.key=g;s.value=t;s.displayName=p.displayName;s.displayText=p.displayText;s.weight=this.options.weight||1;r=new L.RadialBarMarker(this._latlng,s);this._bindMouseEvents(r);this.addLayer(r);c+=b+v;d+=b+v}}});L.radialBarChartMarker=function(t,e){return new L.RadialBarChartMarker(t,e)};L.StackedRegularPolygonMarker=L.ChartMarker.extend({options:{iconSize:new L.Point(50,40)},initialize:function(t,e){L.Util.setOptions(this,e);L.ChartMarker.prototype.initialize.call(this,t,e)},_loadComponents:function(){var t;var e=0;var i=0;var a;var n=this.options;var o=this.options.data;var r=this.options.chartOptions;var s;var l;for(l in o){t=parseFloat(o[l]);s=r[l];minValue=s.minValue||0;maxValue=s.maxValue||100;minRadius=s.minRadius||0;maxRadius=s.maxRadius||10;n.fillColor=s.fillColor||this.options.fillColor;n.value=t;n.minValue=minValue;n.maxValue=maxValue;var f=new L.LinearFunction(new L.Point(minValue,minRadius),new L.Point(maxValue,maxRadius));var c=f.evaluate(t);n.radiusX=e+c;n.radiusY=i+c;n.innerRadiusX=e;n.innerRadiusY=i;n.key=l;n.displayName=s.displayName;n.opacity=this.options.opacity||1;n.fillOpacity=this.options.fillOpacity||.7;n.weight=this.options.weight||1;n.color=s.color||this.options.color;
n.displayText=s.displayText;a=new L.RegularPolygonMarker(this._latlng,n);this._bindMouseEvents(a);e=n.radiusX;i=n.radiusY;this.addLayer(a)}}});L.RadialMeterMarker=L.ChartMarker.extend({initialize:function(t,e){L.Util.setOptions(this,e);L.ChartMarker.prototype.initialize.call(this,t,e)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:180,numberOfSides:30,offset:2,barThickness:5,maxDegrees:180,iconSize:new L.Point(50,40),backgroundStyle:{fill:true,fillColor:"#707070",fillOpacity:.2,opacity:.8,color:"#505050"}},_loadComponents:function(){var t,e,i;var a=this.options.rotation;var n=this.options.maxDegrees||360;var o;var r=this.options;var s=this.options.radiusX||this.options.radius;var l=this.options.radiusY||this.options.radius;var f=this.options.data;var c=this.options.chartOptions;var d;var u=this.options.barThickness||4;var h=a;var p=this.options.numSegments||10;var b=n/p;var v;for(var g in f){t=parseFloat(f[g]);d=c[g];v=this.options.displayOptions?this.options.displayOptions[g]:{};e=d.minValue||0;i=d.maxValue||100;var y=i-e;var _=n/y*(t-e);var m=a+_;var P=a+n;var x=new L.LinearFunction(new L.Point(a,e),new L.Point(P,i));while(h<m){r.startAngle=h;var w=Math.min(b,m-h);r.endAngle=h+w;r.fillColor=d.fillColor;r.radiusX=s;r.radiusY=l;r.barThickness=u;r.rotation=0;r.key=g;r.value=t;r.displayName=d.displayName;r.displayText=d.displayText;var C=x.evaluate(h+w);for(var F in v){r[F]=v[F].evaluate?v[F].evaluate(C):v[F]}o=new L.RadialBarMarker(this._latlng,r);this._bindMouseEvents(o);this.addLayer(o);h+=w}if(this.options.backgroundStyle){if(h<P){var w=P-h;r.endAngle=h+w;r.radiusX=s;r.radiusY=l;r.barThickness=u;r.rotation=0;r.key=g;r.value=t;r.displayName=d.displayName;r.displayText=d.displayText;r.fillColor=null;r.fill=false;r.gradient=false;for(var S in this.options.backgroundStyle){r[S]=this.options.backgroundStyle[S]}var C=x.evaluate(h+w);o=new L.RadialBarMarker(this._latlng,r);this.addLayer(o)}}}}});L.LocationModes={LATLNG:function(t,e){var i=L.Util.getFieldValue(t,this.options.latitudeField);var a=L.Util.getFieldValue(t,this.options.longitudeField);var n=this;var o=function(e,i){var a=L.Util.getFieldValue(t,e);var n=L.Util.getFieldValue(t,i);var o=null;if(a&&n){var r=new L.LatLng(a,n);o={location:r,text:[r.lat.toFixed(3),r.lng.toFixed(3)].join(", "),center:r}}return o};var r=o(this.options.latitudeField,this.options.longitudeField);if(!r&&this.options.fallbackLocationFields){var e=0;var s;while(!r&&e<this.options.fallbackLocationFields.length){s=this.options.fallbackLocationFields[e];r=o(s.latitudeField,s.longitudeField);e++}}return r},GEOHASH:function(t,e){var i=this.options.geohashField?L.Util.getFieldValue(t,this.options.geohashField):e;var a=decodeGeoHash(i);var n;if(a.latitude[2]&&a.longitude[2]){n=new L.LatLngBounds(new L.LatLng(a.latitude[0],a.longitude[0]),new L.LatLng(a.latitude[1],a.longitude[1]))}return{location:n,text:i,center:n.getCenter()}},GWCOUNTRY:function(t,e){var i=this.options.codeField?L.Util.getFieldValue(t,this.options.codeField):e;var a;var n;var o=L.gwNoLookup||{};var r=L.countries||{};var s=L.countryCentroids||{};var l=i.toUpperCase();i=l;var f=l in o;if(f){i=o[l]||i}if(i){a=r[i];n=s[i]}else{console.log("Code not found: "+l)}var c=new L.GeoJSON(a);return{location:c,text:L.GeometryUtils.getName(a)||i,center:n}},COUNTRY:function(t,e){var i=this.options.codeField?L.Util.getFieldValue(t,this.options.codeField):e;var a;var n;var o=L.codeLookup||{};var r=L.alpha2Lookup||{};var s=L.fips2Lookup||{};var l=L.countries||{};var f=L.countryCentroids||{};var c=i.toUpperCase();i=c;if(i.length===2){i=r[c]||s[c]}else if(i.length===3){i=o[c]||i}if(i){a=l[i];n=f[i]}else{console.log("Code not found: "+c)}var d=new L.GeoJSON(a);return{location:d,text:L.GeometryUtils.getName(a)||i,center:n}},STATE:function(t,e){var i=this.options.codeField?L.Util.getFieldValue(t,this.options.codeField):e;var a;var n;var o=L.states||{};var r=L.stateCentroids||{};var s=i.toUpperCase();i=s;a=o[i];n=r[i];var l=new L.GeoJSON(a);return{location:l,text:L.GeometryUtils.getName(a)||i,center:n}},GEOJSON:function(t,e){var i=this.options.geoJSONField;var a=i?L.Util.getFieldValue(t,i):t;var n=null;if(a){var o=this;var r=function(t,e){return o.recordToLayer(t,e)};n=L.GeometryUtils.getGeoJSONLocation(a,t,this.options.locationTextField,r)}return n},LOOKUP:function(t,e){var i=this.options.codeField?L.Util.getFieldValue(t,this.options.codeField):e;this._lookupIndex=this._lookupIndex||L.GeometryUtils.indexFeatureCollection(this.options.locationLookup,this.options.locationIndexField||this.options.codeField);var a=this._lookupIndex[i];var n=null;if(!a&&i.indexOf("0")===0){a=this._lookupIndex[i.substring(1)]}if(a){var o=this;var r=function(t,e){return o.recordToLayer(t,e)};n=L.GeometryUtils.getGeoJSONLocation(a,t,this.options.locationTextField,r)}return n},CUSTOM:function(t,e){var i=this.options.codeField;var a=L.Util.getFieldValue(t,i);var n={};var o;n[a]=t;if(this.options.getLocation){var r=this;var s=function(t,e){r.locationToLayer(e,n[t])};o=this.options.getLocation(n,i,[a],s)}return o}};L.DataLayer=L.LayerGroup.extend({includes:L.Mixin.Events,initialize:function(t,e){L.Util.setOptions(this,e);L.LayerGroup.prototype.initialize.call(this,e);t=t||{};this._includeFunction=this.options.filter||this.options.includeLayer;this._markerFunction=this.options.getMarker||this._getMarker;this._boundaryLayer=new L.LayerGroup;this.addLayer(this._boundaryLayer);this.addData(t)},_zoomFunction:function(t){var e=this._map;var i=this;var a=e.getZoom();if(this.options.maxZoom&&a>this.options.maxZoom){this.hiddenLayers=[];this.eachLayer(function(t){i.hiddenLayers.push(t);e.removeLayer(t)})}else if(this.hiddenLayers){while(this.hiddenLayers.length>0){var n=this.hiddenLayers.pop();e.addLayer(n);if(this.options.backgroundLayer&&n.bringToBack){n.bringToBack()}}this.hiddenLayers=null}},onAdd:function(t){L.LayerGroup.prototype.onAdd.call(this,t);t.on("zoomend",this._zoomFunction,this)},onRemove:function(t){L.LayerGroup.prototype.onRemove.call(this,t);t.off("zoomend",this._zoomFunction,this)},getBounds:function(){var t;this.eachLayer(function(e){if(e.getBounds){if(!t){t=e.getBounds()}else{t.extend(e.getBounds())}}});return t},options:{recordsField:"features",locationMode:L.LocationModes.LATLNG,latitudeField:"geometry.coordinates.1",longitudeField:"geometry.coordinates.0",displayField:null,displayOptions:null,layerOptions:{numberOfSides:4,radius:10,weight:1,color:"#000"},showLegendTooltips:true,tooltipOptions:{iconSize:new L.Point(60,50),iconAnchor:new L.Point(-5,50),mouseOverExaggeration:2},setHighlight:function(t){t.weight=t.weight||1;t.fillOpacity=t.fillOpacity||.5;t.weight*=2;t.fillOpacity/=1.5;return t},unsetHighlight:function(t){t.weight=t.weight||1;t.fillOpacity=t.fillOpacity||.25;t.weight/=2;t.fillOpacity*=1.5;return t}},_getLocation:function(t,e){var i;return this.options.locationMode.call(this,t,e)},_processLocation:function(t){var e=t.center;return e},_addBoundary:function(t,e){var i=t.location;if(this.options.includeBoundary){if(i instanceof L.LatLngBounds){i=new L.Rectangle(i)}if(i.setStyle){var a=this.options.boundaryStyle||L.extend({},e,{fillOpacity:.2,clickable:false});i.setStyle(a)}this._boundaryLayer.addLayer(i)}},_getLayer:function(t,e,i){this._addBoundary(t,e);t=this._processLocation(t);return this._markerFunction.call(this,t,e,i)},_getMarker:function(t,e,i){var a;if(t){if(e.numberOfSides>=30&&!(e.innerRadius||e.innerRadiusX&&e.innerRadiusY)){a=new L.CircleMarker(t,e)}else{a=new L.RegularPolygonMarker(t,e)}}return a},_preProcessRecords:function(t){return t},_shouldLoadRecord:function(t){return this._includeFunction?this._includeFunction.call(this,t):true},_loadRecords:function(t){var e;t=this._preProcessRecords(t);for(var i in t){if(t.hasOwnProperty(i)){var a=t[i];var n=this._shouldLoadRecord(a);if(n){e=this._getLocation(a,i);this.locationToLayer(e,a)}}}},_preloadLocations:function(t){var e=this.options.codeField;var i=[];var a={};for(var n in t){if(t.hasOwnProperty(n)){var o=t[n];var r=L.Util.getFieldValue(o,e);a[r]=o;i.push(r)}}if(this.options.getLocation){var s=this;var l=function(t,e){s.locationToLayer(e,a[t])};this.options.getLocation(a,e,i,l)}},setDisplayOptions:function(t){this.options.displayOptions=t;this.reloadData();return this},setDisplayOption:function(t,e){this.options.displayOptions=this.options.displayOptions||{};if(t in this.options.displayOptions){var i=this.options.displayOptions[t];this.options.displayOptions[t]=L.extend({},i,e)}else{this.options.displayOptions[t]=e}this.reloadData();return this},setFilter:function(t){this.options.filter=t;this.reloadData();return this},setData:function(t){this._data=t;this.reloadData()},reloadData:function(){this.clearLayers();if(this._data){this.addData(this._data)}this.fire("legendChanged",this);return this},addData:function(t){var e=this.options.recordsField!==null&&this.options.recordsField.length>0?L.Util.getFieldValue(t,this.options.recordsField):t;var i;var a;if(this.options.locationMode===L.LocationModes.CUSTOM&&this.options.preload){this._preloadLocations(e)}else{this._loadRecords(e)}this._data=t},locationToLayer:function(t,e){var i;i=this.recordToLayer(t,e);if(i){this.addLayer(i)}},_bindMouseEvents:function(t,e,i){var a=this;var n=this.options;var o=n.setHighlight;var r=n.unsetHighlight;var s=n.tooltipOptions;var l=function(t){var e=t.target;var n=this.options||e.options;var r=new L.LegendIcon(i,n,{className:s.className||"leaflet-div-icon",iconSize:s.iconSize,iconAnchor:s.iconAnchor});var l=t.latlng||t.target._latlng;var f=new L.Marker(l,{icon:r});a.addLayer(f);if(a.tooltip){a.removeLayer(a.tooltip);a.tooltip=null}a.tooltip=f;if(o){n=o(n)}if(e.setStyle){e.setStyle(n)}};var f=function(t){if(a.tooltip){a.tooltip.setLatLng(t.latlng)}};var c=function(t){if(a.tooltip){a.removeLayer(a.tooltip);a.tooltip=null}var e=t.target;var i=this.options||e.options;if(r){i=r(i)}if(e.setStyle){e.setStyle(i)}};var d=function(t){t.on({mouseover:l,mouseout:c,mousemove:f})};var u=function(t){if(t.eachLayer){t.eachLayer(function(t){u(t)})}else{d(t)}};u(t)},_getDynamicOptions:function(t){var e=L.Util.extend({},this.options.layerOptions);var i=this.options.displayOptions;var a={};if(i){for(var n in i){var o=i[n];var r=L.Util.getFieldValue(t,n);var s;var l=o.displayText?o.displayText(r):r;a[n]={name:o.displayName,value:l};if(o.styles){e=L.Util.extend(e,o.styles[r]);o.styles[r]=e}else{for(var f in o){s=o[f];e[f]=s.evaluate?s.evaluate(r):s.call?s.call(this,r):s}}}}return{layerOptions:e,legendDetails:a}},recordToLayer:function(t,e){var i=L.Util.extend({},this.options.layerOptions);var a;var n=this.options.displayOptions;var o={};var r=true;if(this._includeFunction){r=this._includeFunction.call(this,e)}if(r){var s=this._getDynamicOptions(e);i=s.layerOptions;o=s.legendDetails;if(t&&i){i.title=t.text;a=this._getLayer(t,i,e);if(a){if(this.options.showLegendTooltips){this._bindMouseEvents(a,i,o)}if(this.options.onEachRecord){this.options.onEachRecord.call(this,a,e,t,this)}}}}return a},getLegend:function(t){return this.options.getLegend?this.options.getLegend.call(this,t):this._getLegend(t)},_getLegendElement:function(t){var e;var i;var a=document.createElement("i");var n=t.displayProperties;var o=t.layerOptions;var r=t.ignoreProperties;var s=t.displayTextFunction;var l=t.index;var f=t.numSegments;var c=t.segmentWidth;var d=t.minValue;var u=t.maxValue;L.StyleConverter.applySVGStyle(a,o);for(var h in n){if(r.indexOf(h)===-1){valueFunction=n[h];if(valueFunction&&(valueFunction.getBounds||n.minValue&&n.maxValue)){var p=valueFunction.getBounds?valueFunction.getBounds():null;var b=p?p[0].x:n.minValue;var v=p?p[1].x:n.maxValue;var g=new L.LinearFunction(new L.Point(0,b),new L.Point(f,v));e=b;i=v;if(s){e=s(b);i=s(v)}if(l===0){d.innerHTML=e;u.innerHTML=i}var y=(v-b)/f;var _=g.evaluate(l);var m=g.evaluate(l+1);var P=valueFunction.evaluate?valueFunction.evaluate(_):valueFunction(_);var x=valueFunction.evaluate?valueFunction.evaluate(m):valueFunction(m);L.StyleConverter.setCSSProperty(a,h,P);if(h==="fillColor"){a.style.cssText+="background-image:linear-gradient(left , "+P+" 0%, "+x+" 100%);"+"background-image:-ms-linear-gradient(left , "+P+" 0%, "+x+" 100%);"+"background-image:-moz-linear-gradient(left , "+P+" 0%, "+x+" 100%);"+"background-image:-webkit-linear-gradient(left , "+P+" 0%, "+x+" 100%);"}if(h==="color"){a.style.cssText+="border-top-color:"+P+";"+"border-bottom-color:"+x+";"+"border-left-color:"+P+";"+"border-right-color:"+x+";"}if(h==="weight"){a.style.cssText+="border-top-width:"+P+";"+"border-bottom-width:"+x+";"+"border-left-width:"+P+";"+"border-right-width:"+x+";"}var w=y*l+b;var C=w+y;if(s&&valueFunction){w=s(w);C=s(C)}a.setAttribute("title",w+" - "+C)}}}a.style.width=c+"px";return a},_getLegend:function(t){t=t||this.options.legendOptions||{};var e=t.className;var i=document.createElement("div");var a=L.DomUtil.create("div","legend",i);var n;var o;var r=t.numSegments||10;var s=t.width||100;var l={};var f=this.options.layerOptions.weight||0;var c=s/r-2*f;var d={};var u=this.options.layerOptions;var h={};var p;var b=this.options.displayOptions;var v,g;var y={property:["height"],valueFunction:function(t){return(2*t).toFixed(0)+"px"}};if(e){L.DomUtil.addClass(a,e)}if(t.title){L.DomUtil.create("legend","",a).innerHTML=t.title}var _=function(t){return t};for(var m in b){var P=b[m];var x=P.displayName||m;p=P.displayText;var w=p?p:_;var C=P.styles;L.DomUtil.create("div","legend-title",a).innerHTML=x;if(C){a.innerHTML+=new L.CategoryLegend(C).generate()}else{var F=L.DomUtil.create("div","data-layer-legend");var S=L.DomUtil.create("div","min-value",F);var M=L.DomUtil.create("div","scale-bars",F);var k=L.DomUtil.create("div","max-value",F);var O=["displayName","displayText","minValue","maxValue"];for(var T=0;T<r;++T){var D={displayProperties:P,layerOptions:u,ignoreProperties:O,displayTextFunction:w,index:T,numSegments:r,segmentWidth:c,minValue:S,maxValue:k};var R=this._getLegendElement(D);M.appendChild(R)}a.appendChild(F)}}return i.innerHTML}});L.dataLayer=function(t,e){return new L.DataLayer(t,e)};L.MapMarkerDataLayer=L.DataLayer.extend({_getMarker:function(t,e,i){return new L.MapMarker(t,e)}});L.mapMarkerDataLayer=function(t,e){return new L.MapMarkerDataLayer(t,e)};L.MarkerDataLayer=L.DataLayer.extend({initialize:function(t,e){this._markerMap={};L.DataLayer.prototype.initialize.call(this,t,e)},options:{recordsField:"features",locationMode:L.LocationModes.LATLNG,latitudeField:"latitude",longitudeField:"longitude",layerOptions:{icon:null},showLegendTooltips:false},_getMarker:function(t,e,i){if(this.options.setIcon){e.icon=this.options.setIcon.call(this,i,e)}return new L.Marker(t,e)},_getLegendElement:function(t){},_getLegend:function(t){return"<span>No legend available</span>"}});L.markerDataLayer=function(t,e){return new L.MarkerDataLayer(t,e)};L.PanoramioLayer=L.MarkerDataLayer.extend({statics:{UPLOAD_DATE_FORMAT:"DD MMM YYYY",SIZE_BY_DATE:"date",SIZE_BY_POPULARITY:"popularity",SIZE_BY_NONE:"none",SIZES:{square:[60,60],mini_square:[32,32]},NUM_PHOTOS:50}});L.PanoramioLayer=L.PanoramioLayer.extend({initialize:function(t){L.MarkerDataLayer.prototype.initialize.call(this,{},t);this._from=0;this._to=L.PanoramioLayer.NUM_PHOTOS;this._calls=[]},options:{recordsField:"photos",latitudeField:"latitude",longitudeField:"longitude",locationMode:L.LocationModes.LATLNG,showLegendTooltips:false,sizeBy:L.PanoramioLayer.SIZE_BY_DATE,layerOptions:{opacity:1},onEachRecord:function(t,e){var i=L.HTMLUtils.buildTable(e);var a=e["photo_file_url"];var n=e["photo_title"];var o=this;var r=e["width"];var s=e["height"];var l=2e4;t.on("click",function(i){var f=document.createElement("div");var c=L.DomUtil.create("div","",f);var d=L.DomUtil.create("img","photo",c);d.setAttribute("onload","this.style.opacity=1;");d.setAttribute("src",a);d.style.width=r+"px";var u=L.DomUtil.create("div","photo-info",c);u.width=r-20+"px";u.innerHTML="<span>"+n+"</span>"+'<a class="photo-link" target="_blank" href="'+e["photo_url"]+'">'+'<img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 14px;"/>'+"</a>";var h=L.DomUtil.create("a","author-link",c);h.setAttribute("target","_blank");h.setAttribute("href",e["owner_url"]);h.innerHTML="by "+e["owner_name"];var p=new L.DivIcon({className:"photo-details",html:f.innerHTML,iconAnchor:[r/2,s/2]});var b=new L.Marker(i.target._latlng,{icon:p,zIndexOffset:l});b.on("click",function(t){o.removeLayer(t.target)});t.viewedImage=b;o.viewedImage=b;o.addLayer(b)});if(this.options.onEachPhoto){this.options.onEachPhoto.call(this,t,e)}},setIcon:function(t,e){var i=L.Util.getFieldValue(t,"photo_title");var a=null;if(this._sizeFunction){a=this._sizeFunction.evaluate(t.index)}var n=a?new L.Point(a,a):L.PanoramioLayer.SIZES[this.options.size];var o=t["photo_file_url"].replace("/medium/","/"+this.options.size+"/");var r=new L.DivIcon({iconSize:n,className:"",html:'<img class="photo" onload="this.style.opacity=1" title="'+i+'" src="'+o+'"/>'});return r},updateInterval:3e5,size:"square",attributionText:'Photos provided by <a href="http://www.panoramio.com"><img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 10px;"/></a>.  Photos provided by <a href="http://www.panoramio.com"><img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 10px;"/></a> are under the copyright of their owners',refreshEvents:"moveend",photoSet:"public"},includes:L.Mixin.Events,onAdd:function(t){L.DataLayer.prototype.onAdd.call(this,t);if(t.attributionControl){t.attributionControl.addAttribution(this.options.attributionText)}var e=this;var i=function(t){e._from=0;e._to=L.PanoramioLayer.NUM_PHOTOS;e.fire("requestingPhotos");if(e._call){clearTimeout(e._call)}var i=function(){e.requestPhotos()};e._call=setTimeout(i,1e3)};this.requestPhotos();this._interval=setInterval(i,this.options.updateInterval);this._resetFunction=i;t.on(this.options.refreshEvents,i)},onRemove:function(t){L.DataLayer.prototype.onRemove.call(this,t);if(t.attributionControl){t.attributionControl.removeAttribution(this.options.attributionText)}if(this._interval){clearInterval(this._interval);this._interval=null}t.off(this.options.refreshEvents,this._resetFunction)},calculateSizeByDate:function(t){var e=t.photos;var i=[];for(var a=0;a<e.length;++a){var n=e[a];var o=moment(n["upload_date"],L.PanoramioLayer.UPLOAD_DATE_FORMAT);i.push(o);e[a].index=o}i.sort(function(t,e){return t-e});var r=L.PanoramioLayer.SIZES[this.options.size][0];this._sizeFunction=new L.LinearFunction([i[0],r/2],[i[i.length-1],r]);return t},calculateSizeByPopularity:function(t){var e=t.photos;for(var i=0;i<e.length;++i){e[i].index=i}var a=L.PanoramioLayer.SIZES[this.options.size][0];this._sizeFunction=new L.LinearFunction([0,a/2],[e.length,a]);return t},next:function(){this._from=this._to;this._to=this._from+L.PanoramioLayer.NUM_PHOTOS;this.requestPhotos()},previous:function(){this._to=this._from;this._from=this._from-L.PanoramioLayer.NUM_PHOTOS;this.requestPhotos()},requestJsonp:function(t,e,i){var a=this,n="function"+(new Date).getTime(),o=[];e.callback="window.LeafletDvfJsonpCallbacks."+n;for(property in e){if(e.hasOwnProperty(property)){o.push(property+"="+encodeURIComponent(e[property]))}}t+=(t.indexOf("?")>0?"&":"?")+o.join("&");if(typeof window.LeafletDvfJsonpCallbacks==="undefined"){window.LeafletDvfJsonpCallbacks={}}window.LeafletDvfJsonpCallbacks[n]=function(t){i.call(a,t);delete window.LeafletDvfJsonpCallbacks[n]};if(typeof this.jsonpScript==="undefined"){this.jsonpScript=document.createElement("script");this.jsonpScript.setAttribute("type","text/javascript");this.jsonpScript.setAttribute("async","true")}this.jsonpScript.setAttribute("src",t);document.head.appendChild(this.jsonpScript);return{abort:function(){if(n in window.LeafletDvfJsonpCallbacks){window.LeafletDvfJsonpCallbacks[n]=function(){delete window.LeafletDvfJsonpCallbacks[n]}}}}},requestPhotos:function(){var t=this;var e=this._map.getBounds();var i=e.getSouthWest();var a=e.getNorthEast();while(t._calls.length>0){t._calls.pop().abort()}var n=this.requestJsonp("http://www.panoramio.com/map/get_panoramas.php",{set:this.options.photoSet,from:t._from,to:t._to,minx:i.lng,miny:i.lat,maxx:a.lng,maxy:a.lat,size:"medium",mapfilter:"true"},function(e){t._count=e.count;if(moment&&t.options.sizeBy===L.PanoramioLayer.SIZE_BY_DATE){e=t.calculateSizeByDate(e)}else if(t.options.sizeBy===L.PanoramioLayer.SIZE_BY_POPULARITY){e=t.calculateSizeByPopularity(e)}t.fire("photosAvailable",e);t.clearLayers();t.addData(e)});t._calls.push(n)}});L.panoramioLayer=function(t){return new L.PanoramioLayer(t)};L.GeohashDataLayer=L.DataLayer.extend({initialize:function(t,e){L.DataLayer.prototype.initialize.call(this,t,e)},options:{recordsField:"features",locationMode:L.LocationModes.GEOHASH,geohashField:"geohash",displayField:null,displayOptions:null,layerOptions:{weight:1,color:"#000"}},_getLayer:function(t,e,i){return new L.Rectangle(t.location,e)}});L.geohashDataLayer=function(t,e){return new L.GeohashDataLayer(t,e)};L.ChoroplethDataLayer=L.DataLayer.extend({initialize:function(t,e){L.DataLayer.prototype.initialize.call(this,t,e)},options:{recordsField:"features",locationMode:L.LocationModes.COUNTRY,codeField:"ISO",displayField:null,displayOptions:null,layerOptions:{weight:1,color:"#000"},maxZoom:16,backgroundLayer:true},_getLayer:function(t,e,i){if(t.location instanceof L.LatLng){t.location=this._markerFunction.call(this,t.location,e,i)}if(t.location.setStyle){e.gradient=t.location instanceof L.Polyline?false:e.gradient;t.location.setStyle(e)}return t.location}});L.choroplethDataLayer=function(t,e){return new L.ChoroplethDataLayer(t,e)};L.ChartDataLayer=L.DataLayer.extend({options:{showLegendTooltips:false},initialize:function(t,e){L.DataLayer.prototype.initialize.call(this,t,e)},_getLayer:function(t,e,i){this._addBoundary(t,e);t=this._processLocation(t);var a=this.options.chartOptions;var n=this.options.tooltipOptions;var o={};o=e;o.data={};o.chartOptions=a;for(var r in this.options.chartOptions){o.data[r]=L.Util.getFieldValue(i,r)}for(var r in this.options.tooltipOptions){o[r]=this.options.tooltipOptions[r]}var s;if(t){s=this._getMarker(t,o)}return s},_getMarker:function(t,e){},_getLegend:function(t){var e=new L.CategoryLegend(this.options.chartOptions);t=t||this.options.legendOptions;return e.generate(t)}});L.BarChartDataLayer=L.ChartDataLayer.extend({initialize:function(t,e){L.ChartDataLayer.prototype.initialize.call(this,t,e)},_getMarker:function(t,e){return new L.BarChartMarker(t,e)}});L.barChartDataLayer=function(t,e){return new L.BarChartDataLayer(t,e)};L.RadialBarChartDataLayer=L.ChartDataLayer.extend({initialize:function(t,e){L.ChartDataLayer.prototype.initialize.call(this,t,e)},_getMarker:function(t,e){return new L.RadialBarChartMarker(t,e)}});L.radialBarChartDataLayer=function(t,e){return new L.RadialBarChartDataLayer(t,e)};L.PieChartDataLayer=L.ChartDataLayer.extend({initialize:function(t,e){L.ChartDataLayer.prototype.initialize.call(this,t,e)},_getMarker:function(t,e){return new L.PieChartMarker(t,e)}});L.pieChartDataLayer=function(t,e){return new L.PieChartDataLayer(t,e)};L.CoxcombChartDataLayer=L.ChartDataLayer.extend({initialize:function(t,e){L.ChartDataLayer.prototype.initialize.call(this,t,e)},_getMarker:function(t,e){return new L.CoxcombChartMarker(t,e)}});L.coxcombChartDataLayer=function(t,e){return new L.CoxcombChartDataLayer(t,e)};L.StackedRegularPolygonDataLayer=L.ChartDataLayer.extend({initialize:function(t,e){L.ChartDataLayer.prototype.initialize.call(this,t,e)},_getMarker:function(t,e){return new L.StackedRegularPolygonMarker(t,e)}});L.stackedRegularPolygonDataLayer=function(t,e){return new L.StackedRegularPolygonDataLayer(t,e)};L.RadialMeterMarkerDataLayer=L.DataLayer.extend({options:{showLegendTooltips:false},initialize:function(t,e){L.DataLayer.prototype.initialize.call(this,t,e)},_getLayer:function(t,e,i){this._addBoundary(t,e);t=this._processLocation(t);var a=this.options.chartOptions;var n=this.options.tooltipOptions;var o=this.options.displayOptions;var r={};r=e;r.data={};r.chartOptions=a;r.displayOptions=o;for(var s in this.options.chartOptions){r.data[s]=L.Util.getFieldValue(i,s)}for(var s in this.options.tooltipOptions){r[s]=this.options.tooltipOptions[s]}var l;if(t){l=this._getMarker(t,r)}return l},_getMarker:function(t,e){return new L.RadialMeterMarker(t,e)}});L.radialMeterMarkerDataLayer=function(t,e){return new L.RadialMeterMarkerDataLayer(t,e)};L.CalloutLine=L.Path.extend({statics:{LINESTYLE:{ARC:"arc",ANGLE:"angle",STRAIGHT:"straight"},DIRECTION:{NE:"ne",NW:"nw",SE:"se",SW:"sw"}}});L.CalloutLine=L.CalloutLine.extend({initialize:function(t,e){L.Util.setOptions(this,e);L.Path.prototype.initialize.call(this,e);this._latlng=t},options:{size:new L.Point(60,30),position:new L.Point(0,0),color:"#FFFFFF",opacity:1,weight:2,fillColor:"#000000",fill:false,gradient:false,dropShadow:true,direction:L.CalloutLine.DIRECTION.NE,lineStyle:L.CalloutLine.LINESTYLE.ANGLE,lineCap:"butt",lineJoin:"miter",arrow:false},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getEndPoint:function(){this.projectLatlngs();return this._points[this._points.length-1]},_getPathAngle:function(){return new L.SVGPathBuilder(this._points,[],{closePath:false}).build(6)},_getPathArc:function(){var t=(this.options.direction||L.CalloutLine.DIRECTION.NE).toLowerCase();var e=t[1];var i=t[0];var a=e==="w"?-1:1;var n=i==="n"?-1:1;var o=this._points[0];var r=this._points[this._points.length-1];var s=["M",o.x,",",o.y," Q",o.x,",",o.y+n*this.options.size.y," ",r.x,",",r.y];return s.join(" ")},_getPoints:function(){var t=this._point.x+this.options.position.x;var e=this._point.y+this.options.position.y;var i=this.options.size.x;var a=this.options.size.y;var n=(this.options.direction||L.CalloutLine.DIRECTION.NE).toLowerCase();var o=[];var r=n[1];var s=n[0];var l=r==="w"?-1:1;var f=s==="n"?-1:1;o.push(new L.Point(t,e));var c=e+f*a;var d=i/2;var u=Math.atan(a/d);if(this.options.lineStyle===L.CalloutLine.LINESTYLE.ARC){u=Math.atan(Math.pow(a,2)/d)}else if(this.options.lineStyle===L.CalloutLine.LINESTYLE.STRAIGHT){u=Math.atan(a/i)}this._angle=u;if(this.options.lineStyle!==L.CalloutLine.LINESTYLE.STRAIGHT){var h=new L.Point(t+l*d,c);o.push(h)}var p=new L.Point(t+l*i,c);o.push(p);return o},getBounds:function(){var t=this._map,e=t.project(this._latlng),i=new L.Point(e.x+this.options.position.x,e.y+this.options.position.y),a=new L.Point(i.x+this.options.size.x,i.y-this.options.size.y),n=t.unproject(i),o=t.unproject(a);return new L.LatLngBounds(n,o)},setLatLng:function(t){this._latlng=t;this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){this._path.setAttribute("shape-rendering","geometricPrecision");var t=this.options.lineStyle||L.CalloutLine.LINESTYLE.ANGLE;var e="";if(t===L.CalloutLine.LINESTYLE.ANGLE||t===L.CalloutLine.LINESTYLE.STRAIGHT){e+=this._getPathAngle()}else{e+=this._getPathArc()}return e}});L.calloutLine=function(t,e){return new L.CalloutLine(t,e)};L.Callout=L.LayerGroup.extend({options:{color:"#FFFFFF",fillColor:"#FFFFFF"},initialize:function(t,e){L.Util.setOptions(this,e);L.LayerGroup.prototype.initialize.call(this,e);this._latlng=t},onAdd:function(t){L.LayerGroup.prototype.onAdd.call(this,t);this.addLayers()},addArrow:function(t,e,i){if(this.options.arrow){var t=L.LatLng.RAD_TO_DEG*t;var a=this.options.numberOfSides||3;var n=this.options.radius||6;var o=180/a;var r={se:o+t,sw:180+o-t,nw:180+o+t,ne:o-t};var s=r[e];var l=new L.RegularPolygonMarker(this._latlng,{position:i,numberOfSides:a,rotation:s,fillColor:this.options.fillColor,color:this.options.color,gradient:this.options.gradient,weight:this.options.weight,opacity:this.options.opacity,fillOpacity:this.options.fillOpacity,radius:n,lineCap:"butt",lineJoin:"miter"});this.addLayer(l)}},addLine:function(){var t={};for(var e in this.options){if(e!=="icon"){t[e]=this.options[e]}}var i=new L.CalloutLine(this._latlng,t);this.addLayer(i);return i},addIcon:function(t,e){var i=this.options.size;var a=this.options.icon;var n=a.options.iconAnchor;var o=a.options.iconSize;var r=t[0];var s=t[1];var l=s==="w"?a.options.iconSize.x+i.x-e.x:-1*(i.x+e.x);var f=r==="n"?a.options.iconSize.y/2+i.y-e.y:-1*(-a.options.iconSize.y/2+i.y+e.y);a.options.iconAnchor=new L.Point(l,f);var c=new L.Marker(this._latlng,{icon:a});this.addLayer(c)},addLayers:function(){var t=(this.options.direction||"ne").toLowerCase();var e=this.options.position||new L.Point(0,0);var i;i=this.addLine();this.addIcon(t,e);this.addArrow(i._angle,t,e)}});L.callout=function(t,e){return new L.Callout(t,e)};L.FlowLine=L.DataLayer.extend({statics:{LINE_FUNCTION:function(t,e,i){return new L.Polyline([t,e],i)},LINE_FUNCTION_INTERPOLATED:function(t,e,i){var a=this._map.latlngToLayerPoint(t);var n=this._map.latlngToLayerPoint(e);var o=new L.LinearFunction(a,n);var r=Math.ceil(a.distanceTo(n)/i.interpolationOptions.segmentLength);var s=o.samplePoints(r)}}});L.FlowLine=L.FlowLine.extend({initialize:function(t,e){L.Util.setOptions(this,e);L.DataLayer.prototype.initialize.call(this,t,e)},options:{getLine:L.FlowLine.LINE_FUNCTION},onEachSegment:function(t,e,i){var a={};if(this.options.timeField){var n=L.Util.getFieldValue(t,this.options.timeField);var o=L.Util.getFieldValue(e,this.options.timeField);var r=this.options.timeFormat;var s=r?moment(n,r):moment(n);var l=r?moment(o,r):moment(o);var f=l.valueOf()-s.valueOf();a.time=f}for(var c in this.options.displayOptions){var d=L.Util.getFieldValue(t,c);var u=L.Util.getFieldValue(e,c);var h=u-d;var p=h/d*100;a[c]={from:d,to:u,change:h,percentChange:p};if(a.time){a[c].changeOverTime=h/a.time}}var b=i.getLatLngs();var v=b[0].distanceTo(b[1]);var g;if(a.time){g=v/(a.time*1e3)}if(this.options.onEachSegment){this.options.onEachSegment.call(this,t,e,i,a,v,g)}},_loadRecords:function(t){var e;var i=this.options.layerOptions;var a=[];for(var n in t){if(t.hasOwnProperty(n)){var o=t[n];e=this._getLocation(o,n);if(e){var r=this._getLayer(e,i,o);var s;var l=true;if(this.options.includeLayer){l=this.options.includeLayer(o)}if(this._lastRecord&&l){var i=this._getDynamicOptions(this._lastRecord);s=this.options.getLine.call(this,this._lastMarker.getLatLng(),r.getLatLng(),i.layerOptions);this.addLayer(s);this.onEachSegment(this._lastRecord,o,s)}if(l){this._lastRecord=o;this._lastMarker=r}}}}while(a.length>0){this.addLayer(a.pop())}}});L.flowLine=function(t,e){return new L.FlowLine(t,e)};L.ArcedFlowLine=L.FlowLine.extend({options:{getLine:function(t,e,i){return new L.ArcedPolyline([t,e],i)}},initialize:function(t,e){L.FlowLine.prototype.initialize.call(this,t,e)}});L.arcedFlowLine=function(t,e){return new L.ArcedFlowLine(t,e)};L.ArcedPolyline=L.Path.extend({includes:TextFunctions,initialize:function(t,e){L.Path.prototype.initialize.call(this,e);this._latlngs=t},options:{distanceToHeight:new L.LinearFunction([0,5],[1e3,200]),color:"#FFFFFF",opacity:1,weight:1,fillColor:"#000000",fill:false,gradient:false,dropShadow:false,optimizeSpeed:false},projectLatlngs:function(){this._points=[];for(var t=0;t<this._latlngs.length;++t){this._points.push(this._map.latLngToLayerPoint(this._latlngs[t]))}},getBounds:function(){var t=this._map,e=t.project(this._latlngs[0]),i=new L.Point(e.x+this.options.offset.x,e.y+this.options.offset.y),a=new L.Point(i.x+this.options.size.x,i.y-this.options.size.y),n=t.unproject(i),o=t.unproject(a);return new L.LatLngBounds(n,o)},setLatLngs:function(t){this._latlngs=t;this.redraw()},getLatLngs:function(){return this._latlngs},drawSegment:function(t,e){var i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));var a=this.options.distanceToHeight.evaluate(i);var n=t.x-e.x;var o=n/Math.abs(n);var r=["M",t.x,",",t.y," C",t.x,",",t.y-a," ",e.x,",",e.y-a," ",e.x,",",e.y];return r.join(" ")},getPathString:function(){if(this.options.optimizeSpeed){this._path.setAttribute("shape-rendering","optimizeSpeed")}var t=[];for(var e=0;e<this._points.length-1;++e){t.push(this.drawSegment(this._points[e],this._points[e+1]))
}return t.join("")}});L.arcedPolyline=function(t,e){return new L.ArcedPolyline(t,e)};L.Control.Legend=L.Control.extend({options:{position:"bottomright",autoAdd:true},onAdd:function(t){var e="leaflet-control-legend",i=L.DomUtil.create("div",e);var a=this;if(this.options.autoAdd){t.on("layeradd",function(t){var e=t.layer;a.addLayer(e)});t.on("layerremove",function(t){var e=t.layer;a.removeLayer(e)})}this.toggleSize=L.bind(this.toggleSize,this);L.DomEvent.addListener(i,"mouseover",this.toggleSize).addListener(i,"mouseout",this.toggleSize).addListener(i,"click",L.DomEvent.stopPropagation).addListener(i,"click",L.DomEvent.preventDefault);return i},clear:function(){this._container.innerHTML=""},toggleSize:function(){if(L.DomUtil.hasClass(this._container,"larger")){L.DomUtil.removeClass(this._container,"larger")}else{L.DomUtil.addClass(this._container,"larger")}},redrawLayer:function(t){this.removeLayer(t);this.addLayer(t)},addLayer:function(t){var e=L.Util.stamp(t);var i=this;if(t.getLegend){this.addLegend(e,t.getLegend());t.on("legendChanged",function(){i.redrawLayer(t)})}},removeLayer:function(t){var e=L.Util.stamp(t);if(t.getLegend){var i=document.getElementById(e);i.parentNode.removeChild(i);t.off("legendChanged")}},addLegend:function(t,e){var i=this._container,a=document.getElementById(t);if(!a){a=L.DomUtil.create("div","",i);a.id=t}a.innerHTML=e}});L.control.legend=function(t){return new L.Control.Legend(t)};